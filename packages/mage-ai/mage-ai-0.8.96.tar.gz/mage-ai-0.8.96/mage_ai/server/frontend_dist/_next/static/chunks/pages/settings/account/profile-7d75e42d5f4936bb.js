(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6308],{63153:function(e,n,r){"use strict";r.d(n,{Z3:function(){return t},ms:function(){return o},s7:function(){return i}});var t=[{autoComplete:"username",label:"Username",required:!0,uuid:"username"},{autoComplete:"email",disabled:!1,label:"Email",required:!0,type:"email",uuid:"email"}],i="password_current",o=[{autoComplete:"current-password",label:"Current password",type:"password",uuid:i},{autoComplete:"new-password",label:"New password",type:"password",uuid:"password"},{autoComplete:"new-password",label:"Confirm new password",type:"password",uuid:"password_confirmation"}]},20582:function(e,n,r){"use strict";var t=r(82394),i=r(21831),o=r(75582),u=r(21764),c=r(82684),d=r(83455),a=r(60328),s=r(79891),l=r(67971),f=r(87372),p=r(55378),h=r(86673),m=r(82944),v=r(82531),b=r(66166),g=r(63153),w=r(24224),x=r(9736),Z=r(7715),y=r(96510),j=r(28598);function _(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function P(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?_(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}n.Z=function(e){var n=e.disabledFields,r=e.entity,_=void 0===r?"global":r,k=e.entityID,O=e.hideFields,C=e.newUser,I=e.onDeleteSuccess,S=e.onSaveSuccess,E=e.showDelete,T=e.title,D=e.user,H=(0,c.useState)(!0),N=H[0],W=H[1],V=(0,c.useState)({}),q=V[0],A=V[1],M=(0,c.useState)(null),R=M[0],F=M[1],B=((0,x.PR)()||{}).owner,L=v.ZP.roles.list({entity:_,entity_ids:k?[k]:[],limit_roles:!!C},{revalidateOnFocus:!1}),U=L.data,G=(L.mutate,(0,c.useMemo)((function(){return(null===U||void 0===U?void 0:U.roles)||[]}),[null===U||void 0===U?void 0:U.roles])),Q=(0,d.Db)(C?v.ZP.users.useCreate():v.ZP.users.useUpdate(null===D||void 0===D?void 0:D.id),{onSuccess:function(e){return(0,y.wD)(e,{callback:function(e){var n=e.user,r=g.Z3.concat(g.ms).map((function(e){return e.uuid})),t=(0,Z.GL)(n,r);F(t),u.Am.success(C?"New user created successfully.":"User profile successfully updated.",{position:u.Am.POSITION.BOTTOM_RIGHT,toastId:"user-update-success-".concat(n.id)}),null===S||void 0===S||S(t)},onErrorCallback:function(e){var n=e.error,r=n.errors,t=n.exception,i=n.message,o=n.type;u.Am.error((null===r||void 0===r?void 0:r.error)||t||i,{position:u.Am.POSITION.BOTTOM_RIGHT,toastId:o})}})}}),X=(0,o.Z)(Q,2),z=X[0],Y=X[1].isLoading,J=(0,d.Db)(v.ZP.users.useDelete(null===D||void 0===D?void 0:D.id),{onSuccess:function(e){return(0,y.wD)(e,{callback:function(){null===I||void 0===I||I()},onErrorCallback:function(e){var n=e.error,r=n.errors,t=n.message;alert(t),console.log(r)}})}}),K=(0,o.Z)(J,2),$=K[0],ee=K[1].isLoading,ne=O?(0,i.Z)(O):[];C&&ne.push(g.s7);var re=!ne||!ne.includes(g.s7),te=(0,b.Z)(D);(0,c.useEffect)((function(){if(D&&(!R||(null===te||void 0===te?void 0:te.id)!==(null===D||void 0===D?void 0:D.id))){var e=g.Z3.concat(g.ms).map((function(e){return e.uuid}));F((0,Z.GL)(D,e))}null!==R&&void 0!==R&&R.password||null!==R&&void 0!==R&&R.password_confirmation?(null===R||void 0===R?void 0:R.password)!==(null===R||void 0===R?void 0:R.password_confirmation)?A({password_confirmation:"Password confirmation does not match."}):!re||null!==R&&void 0!==R&&R.password_current?A(null):A({password_current:"This field is required."}):null!==R&&void 0!==R&&R.password_current&&re?null!==R&&void 0!==R&&R.password&&null!==R&&void 0!==R&&R.password_confirmation?A(null):A({password:"This field is required.",password_confirmation:"This field is required."}):null!==R&&void 0!==R&&R.password_current||null!==R&&void 0!==R&&R.password||null!==R&&void 0!==R&&R.password_confirmation||A(null)}),[R,re,D,te]);var ie=(0,c.useState)(!1),oe=ie[0],ue=ie[1],ce=(0,c.useMemo)((function(){return(oe?null===R||void 0===R?void 0:R.roles_new:null===D||void 0===D?void 0:D.roles_new)||[]}),[R,oe,D]),de=(0,c.useMemo)((function(){var e=(null===G||void 0===G?void 0:G.map((function(e){return e.id})))||[];return null===ce||void 0===ce?void 0:ce.filter((function(n){var r=n.id;return e.includes(r)}))}),[ce,G]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(f.Z,{children:T||"Edit profile"}),(0,j.jsxs)("form",{children:[g.Z3.filter((function(e){var n=e.uuid;return!ne||!ne.includes(n)})).map((function(e){var n=e.autoComplete,r=e.disabled,i=e.label,o=e.required,u=e.type,c=e.uuid;return(0,j.jsx)(h.Z,{mt:2,children:(0,j.jsx)(m.Z,{autoComplete:n,disabled:r&&!C,label:i,onChange:function(e){W(!1),F((function(n){return P(P({},n),{},(0,t.Z)({},c,e.target.value))}))},primary:!0,required:o,setContentOnMount:!0,type:u,value:(null===R||void 0===R?void 0:R[c])||""})},c)})),!(null!==D&&void 0!==D&&D.owner)&&(0,j.jsxs)(h.Z,{mt:2,children:[(0,j.jsx)(p.Z,{disabled:null===n||void 0===n?void 0:n.includes("roles"),label:"Roles",onChange:function(e){var n=(0,w.sE)(G,(function(n){return n.id==e.target.value}));n&&(W(!1),ue(!0),F((function(e){var r={};return(0,w.sE)(ce,(function(e){return e.id==(null===n||void 0===n?void 0:n.id)}))||(r={roles_new:[].concat((0,i.Z)(ce),[n])}),P(P({},e),r)})))},primary:!0,setContentOnMount:!0,children:G.map((function(e){var n=e.id,r=e.name;return(0,j.jsx)("option",{value:n,children:r},r)}))}),(0,j.jsx)(h.Z,{mb:1}),(0,j.jsx)(l.Z,{alignItems:"center",flexWrap:"wrap",children:null===de||void 0===de?void 0:de.map((function(e){var r=e.id,t=e.name;return(0,j.jsx)(h.Z,{mb:1,mr:1,children:(0,j.jsx)(s.Z,{disabled:null===n||void 0===n?void 0:n.includes("roles"),label:t,onClick:function(){W(!1),ue(!0),F((function(e){return P(P({},e),{},{roles_new:(0,w.Od)(ce,(function(e){return e.id===r}))})}))},primary:!0})},"user_roles/".concat(t))}))})]}),(0,j.jsxs)(h.Z,{mt:5,children:[(0,j.jsx)(f.Z,{children:C?"Password":"Change password"}),g.ms.filter((function(e){var n=e.uuid;return!ne||!ne.includes(n)})).map((function(e){var n=e.autoComplete,r=e.disabled,i=e.label,o=e.required,u=e.type,c=e.uuid;return(0,j.jsx)(h.Z,{mt:2,children:(0,j.jsx)(m.Z,{autoComplete:n,disabled:r,label:i,meta:{error:null===q||void 0===q?void 0:q[c],touched:!(null===q||void 0===q||!q[c])},onChange:function(e){W(!1),F((function(n){return P(P({},n),{},(0,t.Z)({},c,e.target.value))}))},primary:!0,required:o,setContentOnMount:!0,type:u,value:(null===R||void 0===R?void 0:R[c])||""})},c)}))]}),(0,j.jsx)(h.Z,{mt:5,children:(0,j.jsxs)(l.Z,{children:[(0,j.jsx)(a.Z,{disabled:N||q&&!(0,Z.Qr)(q),loading:Y,onClick:function(){var e,n=P({},R);"roles_new"in n&&(n.roles_new=null===(e=R.roles_new)||void 0===e?void 0:e.map((function(e){return e.id})));z({user:n})},primary:!0,children:C?"Create new user":"Update user profile"}),E&&B&&(0,j.jsx)(h.Z,{ml:1,children:(0,j.jsx)(a.Z,{danger:!0,loading:ee,onClick:function(){window.confirm("Are you sure you want to delete ".concat(R.username||R.email,"?"))&&$()},children:"Delete user"})})]})})]})]})}},79891:function(e,n,r){"use strict";var t=r(38626),i=r(60328),o=r(67971),u=r(86673),c=r(19711),d=r(23831),a=r(10503),s=r(49125),l=r(31012),f=r(28598),p=t.default.div.withConfig({displayName:"Chip__ChipStyle",componentId:"sc-1ok73g-0"})(["display:inline-block;"," "," "," "," ",""],(function(e){return!e.primary&&"\n    background-color: ".concat((e.theme.background||d.Z.background).popup,";\n  ")}),(function(e){return e.primary&&"\n    background-color: ".concat((e.theme.chart||d.Z.chart).primary,";\n  ")}),(function(e){return!e.small&&"\n    border-radius: ".concat((s.iI+l.Al)/2,"px;\n    height: ").concat(1.5*s.iI+l.Al,"px;\n    padding: ").concat(s.iI/1.5,"px ").concat(1.25*s.iI,"px;\n  ")}),(function(e){return e.small&&"\n    border-radius: ".concat((s.iI/2+l.Al)/2,"px;\n    height: ").concat(l.Al+s.iI/2+2,"px;\n    padding: ").concat(s.iI/4,"px ").concat(s.iI,"px;\n  ")}),(function(e){return e.border&&"\n    border: 1px solid ".concat((e.theme.content||d.Z.content).muted,";\n  ")}));n.Z=function(e){var n=e.border,r=e.children,t=e.disabled,d=e.label,l=e.onClick,h=e.primary,m=e.small;return(0,f.jsx)(p,{border:n,primary:h,small:m,children:(0,f.jsx)(i.Z,{basic:!0,disabled:t,noBackground:!0,noPadding:!0,onClick:l,transparent:!0,children:(0,f.jsxs)(o.Z,{alignItems:"center",children:[r,d&&(0,f.jsx)(c.ZP,{small:m,children:d}),!t&&(0,f.jsx)(u.Z,{ml:1,children:(0,f.jsx)(a.x8,{default:h,muted:!h,size:m?s.iI:1.25*s.iI})})]})})})}},29237:function(e,n,r){"use strict";var t=r(38626),i=r(67971),o=r(86673),u=r(19711),c=r(23831),d=r(73942),a=r(37391),s=r(49125),l=r(28598),f=(0,t.css)(["padding:","px;padding-bottom:","px;padding-top:","px;"],2*s.iI,1.5*s.iI,1.5*s.iI),p=t.default.div.withConfig({displayName:"Panel__PanelStyle",componentId:"sc-1ct8cgl-0"})(["border-radius:","px;overflow:hidden;"," "," "," "," "," "," "," "," "," "," "," ",""],d.n_,(function(e){return e.fullWidth&&"\n    width: 100%;\n  "}),(function(e){return!e.borderless&&"\n    border: 1px solid ".concat((e.theme.interactive||c.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.success&&"\n    background-color: ".concat((e.theme.background||c.Z.background).successLight,";\n  ")}),(function(e){return e.success&&!e.borderless&&"\n    border: 1px solid ".concat((e.theme.background||c.Z.background).success,";\n  ")}),(function(e){return!e.dark&&!e.success&&"\n    background-color: ".concat((e.theme.background||c.Z.background).panel,";\n  ")}),(function(e){return e.dark&&"\n    background-color: ".concat((e.theme.background||c.Z.background).content,";\n  ")}),(function(e){return!e.fullHeight&&"\n    height: fit-content;\n  "}),(function(e){return e.maxHeight&&"\n    max-height: ".concat(e.maxHeight,";\n  ")}),(function(e){return e.maxWidth&&"\n    max-width: ".concat(e.maxWidth,"px;\n  ")}),(function(e){return e.minWidth&&"\n    min-width: ".concat(e.minWidth,"px;\n\n    @media (max-width: ").concat(e.minWidth,"px) {\n      min-width: 0;\n    }\n  ")}),(function(e){return e.borderless&&"\n    border: none;\n  "}),(function(e){return e.overflowVisible&&"\n    overflow: visible;\n  "})),h=t.default.div.withConfig({displayName:"Panel__HeaderStyle",componentId:"sc-1ct8cgl-1"})(["border-top-left-radius:","px;border-top-right-radius:","px;"," "," "," ",""],d.n_,d.n_,(function(e){return"\n    background-color: ".concat((e.theme.background||c.Z.background).chartBlock,";\n    border-bottom: 1px solid ").concat((e.theme.interactive||c.Z.interactive).defaultBorder,";\n  ")}),(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),f,(function(e){return e.headerPaddingVertical&&"\n    padding-bottom: ".concat(e.headerPaddingVertical,"px;\n    padding-top: ").concat(e.headerPaddingVertical,"px;\n  ")})),m=t.default.div.withConfig({displayName:"Panel__ContentStyle",componentId:"sc-1ct8cgl-2"})(["overflow-y:auto;padding:","px;height:100%;"," "," "," "," ",""],1.75*s.iI,a.w5,(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),(function(e){return e.maxHeight&&"\n    max-height: calc(".concat(e.maxHeight," - ").concat(15*s.iI,"px);\n  ")}),(function(e){return e.noPadding&&"\n    padding: 0;\n  "}),(function(e){return e.overflowVisible&&"\n    overflow: visible;\n  "})),v=t.default.div.withConfig({displayName:"Panel__FooterStyle",componentId:"sc-1ct8cgl-3"})(["border-style:",";border-top-width:","px;padding:","px;"],d.M8,d.YF,1.75*s.iI);n.Z=function(e){var n=e.borderless,r=e.children,t=e.containerRef,c=e.contentContainerRef,d=e.dark,a=e.footer,s=e.fullHeight,f=void 0===s||s,b=e.fullWidth,g=void 0===b||b,w=e.header,x=e.headerHeight,Z=e.headerIcon,y=e.headerPaddingVertical,j=e.headerTitle,_=e.maxHeight,P=e.maxWidth,k=e.minWidth,O=e.noPadding,C=e.overflowVisible,I=e.subtitle,S=e.success;return(0,l.jsxs)(p,{borderless:n,dark:d,fullHeight:f,fullWidth:g,maxHeight:_,maxWidth:P,minWidth:k,overflowVisible:C,ref:t,success:S,children:[(w||j)&&(0,l.jsxs)(h,{headerPaddingVertical:y,height:x,children:[w&&w,j&&(0,l.jsx)(i.Z,{alignItems:"center",justifyContent:"space-between",children:(0,l.jsxs)(i.Z,{alignItems:"center",children:[Z&&Z,(0,l.jsx)(o.Z,{ml:Z?1:0,children:(0,l.jsx)(u.ZP,{bold:!0,default:!0,children:j})})]})})]}),(0,l.jsxs)(m,{maxHeight:_,noPadding:O,overflowVisible:C,ref:c,children:[I&&(0,l.jsx)(o.Z,{mb:2,children:(0,l.jsx)(u.ZP,{default:!0,children:I})}),r]}),a&&(0,l.jsx)(v,{children:a})]})}},96283:function(e,n,r){"use strict";r.r(n);var t=r(77837),i=r(38860),o=r.n(i),u=r(29237),c=r(41788),d=r(30775),a=r(86673),s=r(20582),l=r(82531),f=r(49125),p=r(79585),h=r(9736),m=r(28598);function v(){var e=((0,h.PR)()||{}).id,n=l.ZP.users.detail(e),r=n.data,t=n.mutate,i=null===r||void 0===r?void 0:r.user;return(0,m.jsx)(d.Z,{uuidItemSelected:p.DQ,uuidWorkspaceSelected:p.tC,children:(0,m.jsx)(a.Z,{p:f.cd,children:(0,m.jsx)(u.Z,{children:(0,m.jsx)(s.Z,{disabledFields:["roles"],onSaveSuccess:t,user:i})})})})}v.getInitialProps=(0,t.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))),n.default=(0,c.Z)(v)},10736:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/account/profile",function(){return r(96283)}])},80022:function(e,n,r){"use strict";function t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(n,{Z:function(){return t}})},15544:function(e,n,r){"use strict";function t(e){return t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(e)}r.d(n,{Z:function(){return t}})},99177:function(e,n,r){"use strict";function t(e,n){return t=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},t(e,n)}function i(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&t(e,n)}r.d(n,{Z:function(){return i}})},93189:function(e,n,r){"use strict";r.d(n,{Z:function(){return o}});var t=r(12539),i=r(80022);function o(e,n){if(n&&("object"===t(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}}},function(e){e.O(0,[844,1424,1005,3077,9774,2888,179],(function(){return n=10736,e(e.s=n);var n}));var n=e.O();_N_E=n}]);