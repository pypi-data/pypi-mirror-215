(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2858],{1210:function(e,n,r){"use strict";r.d(n,{Z:function(){return C}});var t=r(82394),o=r(21831),i=r(82684),l=r(47999),c=r(49894),s=r(93461),d=r(57384),a=r(41424),u=r(72454),f=r(28598);function h(e,n){var r=e.children;return(0,f.jsx)(u.HS,{ref:n,children:r})}var m=i.forwardRef(h),v=r(32063),j=r(85019),g=r(82531),x=r(66166),b=r(3055),p=r(49125),Z=r(91427),w=r(24141);function k(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function y(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?k(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var C=function(e){var n,r=e.after,t=e.afterHidden,h=e.afterWidth,k=e.afterWidthOverride,C=e.before,P=e.beforeWidth,_=e.breadcrumbs,O=e.children,I=e.errors,S=e.headerMenuItems,B=e.headerOffset,D=e.mainContainerHeader,M=e.navigationItems,F=e.setErrors,H=e.subheaderChildren,E=e.title,N=e.uuid,A=(0,w.i)().width,U="dashboard_after_width_".concat(N),T="dashboard_before_width_".concat(N),G=(0,i.useRef)(null),R=(0,i.useState)(k?h:(0,Z.U2)(U,h)),V=R[0],L=R[1],z=(0,i.useState)(!1),W=z[0],q=z[1],Q=(0,i.useState)(C?Math.max((0,Z.U2)(T,P),13*p.iI):null),K=Q[0],X=Q[1],Y=(0,i.useState)(!1),J=Y[0],$=Y[1],ee=(0,i.useState)(null)[1],ne=g.ZP.projects.list({},{revalidateOnFocus:!1}).data,re=null===ne||void 0===ne?void 0:ne.projects,te=[];_?te.push.apply(te,(0,o.Z)(_)):(null===re||void 0===re?void 0:re.length)>=1&&te.push.apply(te,[{label:function(){var e;return null===(e=re[0])||void 0===e?void 0:e.name},linkProps:{href:"/"}},{bold:!0,label:function(){return E}}]),(0,i.useEffect)((function(){null===G||void 0===G||!G.current||W||J||null===ee||void 0===ee||ee(G.current.getBoundingClientRect().width)}),[W,V,J,K,G,ee,A]),(0,i.useEffect)((function(){W||(0,Z.t8)(U,V)}),[t,W,V,U]),(0,i.useEffect)((function(){J||(0,Z.t8)(T,K)}),[J,K,T]);var oe=(0,x.Z)(h);return(0,i.useEffect)((function(){k&&oe!==h&&L(h)}),[k,h,oe]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(d.Z,{title:E}),(0,f.jsx)(a.Z,{breadcrumbs:te,menuItems:S,project:null===re||void 0===re?void 0:re[0],version:null===re||void 0===re||null===(n=re[0])||void 0===n?void 0:n.version}),(0,f.jsxs)(u.Nk,{children:[0!==(null===M||void 0===M?void 0:M.length)&&(0,f.jsx)(u.lm,{showMore:!0,children:(0,f.jsx)(j.Z,{navigationItems:M,showMore:!0})}),(0,f.jsx)(s.Z,{flex:1,flexDirection:"column",children:(0,f.jsxs)(v.Z,{after:r,afterHeightOffset:b.Mz,afterHidden:t,afterMousedownActive:W,afterWidth:V,before:C,beforeHeightOffset:b.Mz,beforeMousedownActive:J,beforeWidth:u.k1+(C?K:0),headerOffset:B,hideAfterCompletely:!0,leftOffset:C?u.k1:null,mainContainerHeader:D,mainContainerRef:G,setAfterMousedownActive:q,setAfterWidth:L,setBeforeMousedownActive:$,setBeforeWidth:X,children:[H&&(0,f.jsx)(m,{children:H}),O]})})]}),I&&(0,f.jsx)(l.Z,{disableClickOutside:!0,isOpen:!0,onClickOutside:function(){return null===F||void 0===F?void 0:F(null)},children:(0,f.jsx)(c.Z,y(y({},I),{},{onClose:function(){return null===F||void 0===F?void 0:F(null)}}))})]})}},66176:function(e,n,r){"use strict";var t=r(82394),o=r(91835),i=(r(82684),r(38626)),l=r(23831),c=r(73942),s=r(49125),d=r(28598);function a(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function u(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?a(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var f=i.default.div.withConfig({displayName:"ProgressBar__ProgressBarContainerStyle",componentId:"sc-10x9ojc-0"})(["border-radius:","px;height:","px;overflow:hidden;position:relative;width:100%;",""],c.BG,.75*s.iI,(function(e){return"\n    background-color: ".concat((e.theme.monotone||l.Z.monotone).grey200,";\n  ")})),h=i.default.div.withConfig({displayName:"ProgressBar__ProgressBarStyle",componentId:"sc-10x9ojc-1"})(["height:inherit;position:absolute;"," "," "," ",""],(function(e){return!e.danger&&"\n    background-color: ".concat((e.theme.progress||l.Z.progress).positive,";\n  ")}),(function(e){return e.progress&&"\n    width: ".concat(e.progress,"%;\n  ")}),(function(e){return e.danger&&"\n    background-color: ".concat((e.theme.progress||l.Z.progress).negative,";\n  ")}),(function(e){return e.animateProgress&&"\n    animation: animate-progress ".concat(e.animateProgress.duration,"ms linear forwards;\n\n    @keyframes animate-progress {\n      0% {\n        width: ").concat(e.animateProgress.start,"%;\n      }\n\n      100% {\n        width: ").concat(e.animateProgress.end,"%;\n      }\n    }\n  ")}));n.Z=function(e){var n=(0,o.Z)({},e);return(0,d.jsx)(f,u(u({},n),{},{children:(0,d.jsx)(h,u({},n))}))}},32316:function(e,n,r){"use strict";r.d(n,{Z:function(){return j}});var t=r(82684),o=r(60328),i=r(67971),l=r(882),c=r(86673),s=r(19711),d=r(99994),a=r(38626),u=r(49125),f=r(37391),h=a.default.div.withConfig({displayName:"indexstyle__TabsContainerStyle",componentId:"sc-segf7l-0"})(["padding-left:","px;padding-right:","px;"," "," ",""],u.cd*u.iI,u.cd*u.iI,(function(e){return e.noPadding&&"\n    padding: 0;\n  "}),(function(e){return e.allowScroll&&"\n    overflow: auto;\n  "}),f.w5),m=r(66653),v=r(28598);var j=function(e){var n=e.allowScroll,r=e.compact,a=e.contained,f=e.noPadding,j=e.onClickTab,g=e.selectedTabUUID,x=e.small,b=e.tabs,p=(0,t.useMemo)((function(){var e=b.length,n=[];return b.forEach((function(t,a){var f=t.Icon,h=t.IconSelected,b=t.label,p=t.uuid,Z=p===g,w=Z&&h||f,k=b?b():p,y=(0,v.jsxs)(i.Z,{alignItems:"center",children:[w&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(w,{default:!Z,size:2*u.iI}),(0,v.jsx)(c.Z,{mr:1})]}),(0,v.jsx)(s.ZP,{bold:!0,default:!Z,noWrapping:!0,small:!0,children:k})]});a>=1&&e>=2&&n.push((0,v.jsx)("div",{style:{marginLeft:1.5*u.iI}},"spacing-".concat(p))),Z?n.push((0,v.jsx)(l.Z,{backgroundGradient:d.yr,backgroundPanel:!0,borderLess:!0,borderWidth:2,compact:r||x,onClick:function(e){(0,m.j)(e),j(t)},paddingUnitsHorizontal:1.75,paddingUnitsVertical:1.25,small:x,children:y},p)):n.push((0,v.jsx)("div",{style:{padding:2},children:(0,v.jsx)(o.Z,{borderLess:!0,compact:r||x,default:!0,onClick:function(e){(0,m.j)(e),j(t)},outline:!0,small:x,children:y})},"button-tab-".concat(p)))})),n}),[r,j,g,x,b]),Z=(0,v.jsx)(i.Z,{alignItems:"center",children:p});return a?Z:(0,v.jsx)(h,{allowScroll:n,noPadding:f,children:Z})}},83243:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return be}});var t=r(77837),o=r(38860),i=r.n(o),l=r(41788),c=r(82394),s=r(75582),d=r(54407),a=r.n(d),u=r(82684),f=r(83455),h=r(60328),m=r(34744),v=r(67971),j=r(87372),g=r(55378),x=r(86673),b=r(54283),p=r(19711),Z=r(38435),w=r(82944),k=r(46261),y=r(82531),C=r(10503),P="delete",_="merge",O="pull",I="push",S="rebase",B={uuid:"Branches"},D={uuid:"Files"},M={uuid:"Commit"},F={uuid:"Setup"},H=[F,B,D,M],E=r(49125),N=r(90211),A=r(96510),U=r(28598);var T=function(e){var n=e.branch,r=e.branches,t=e.fetchBranch,o=e.fetchBranches,i=e.showError,l=(0,u.useState)(""),d=l[0],a=l[1],O=(0,u.useState)(null),I=O[0],B=O[1],M=(0,u.useState)(null),H=M[0],T=M[1],G=(0,u.useState)(null),R=G[0],V=G[1],L=(0,u.useState)(""),z=L[0],W=L[1],q=(0,f.Db)(y.ZP.git_branches.useCreate(),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){t(),o(),W("")},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),Q=(0,s.Z)(q,2),K=Q[0],X=Q[1].isLoading,Y=(0,f.Db)(y.ZP.git_branches.useCreate(),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){t()},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),J=(0,s.Z)(Y,2),$=J[0],ee=J[1].isLoading,ne=(0,f.Db)(y.ZP.git_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(e){var n=e.git_branch.progress;t(),a(""),B(""),T(n),V("")},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),re=(0,s.Z)(ne,2),te=re[0],oe=re[1].isLoading;return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(x.Z,{mb:E.HN,children:[(0,U.jsxs)(j.Z,{children:["Branches",r?" (".concat(null===r||void 0===r?void 0:r.length,")"):""]}),(0,U.jsxs)(x.Z,{mt:E.Mq,children:[(0,U.jsx)(x.Z,{mb:1,children:(0,U.jsx)(p.ZP,{bold:!0,muted:!0,children:"Current branch"})}),(0,U.jsxs)(v.Z,{alignItems:"center",children:[(0,U.jsx)(k.Z,{fullSize:!0,label:"Choose a different branch to switch branches",widthFitContent:!0,children:(0,U.jsx)(g.Z,{beforeIcon:(0,U.jsx)(C.I0,{muted:!1}),beforeIconSize:2*E.iI,monospace:!0,onChange:function(e){return $({git_branch:{name:e.target.value}})},value:null===n||void 0===n?void 0:n.name,children:(null===n||void 0===n?void 0:n.name)&&(null===r||void 0===r?void 0:r.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)})))})}),(0,U.jsx)(x.Z,{mr:E.cd}),ee&&(0,U.jsx)(b.Z,{inverted:!0})]})]}),(0,U.jsx)(x.Z,{mt:E.Mq,children:(0,U.jsxs)(v.Z,{alignItems:"center",children:[(0,U.jsx)(w.Z,{label:"New branch name",monospace:!0,onChange:function(e){var n;return W(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},value:z||""}),(0,U.jsx)(x.Z,{mr:1}),(0,U.jsx)(h.Z,{beforeIcon:(0,U.jsx)(C.mm,{size:2*E.iI}),disabled:!z,loading:X,onClick:function(){K({git_branch:{name:z}})},primary:!0,children:"Create new branch"})]})})]}),(0,U.jsxs)(x.Z,{mb:E.HN,children:[(0,U.jsx)(j.Z,{children:"Actions"}),(0,U.jsxs)(x.Z,{mt:E.Mq,children:[(0,U.jsxs)(x.Z,{mb:E.Mq,children:[(0,U.jsx)(x.Z,{mb:1,children:(0,U.jsx)(p.ZP,{bold:!0,muted:!0,children:"Compare branch"})}),(null===n||void 0===n?void 0:n.name)&&(0,U.jsx)(p.ZP,{monospace:!0,children:null===n||void 0===n?void 0:n.name})]}),(0,U.jsxs)(v.Z,{alignItems:"center",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)(x.Z,{mb:1,children:(0,U.jsx)(p.ZP,{bold:!0,muted:!0,children:"Base branch"})}),(0,U.jsx)(g.Z,{beforeIcon:(0,U.jsx)(C.I0,{}),beforeIconSize:1.5*E.iI,monospace:!0,onChange:function(e){return V(e.target.value)},placeholder:"Choose a branch",value:R,children:null===r||void 0===r?void 0:r.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))})]}),(0,U.jsx)(x.Z,{mr:1}),(0,U.jsxs)("div",{children:[(0,U.jsx)(x.Z,{mb:1,children:(0,U.jsx)(p.ZP,{bold:!0,muted:!0,children:"Action"})}),(0,U.jsxs)(g.Z,{onChange:function(e){return B(e.target.value)},placeholder:"Choose action",value:I||"",children:[(0,U.jsx)("option",{value:_,children:(0,N.vg)(_)}),(0,U.jsx)("option",{value:S,children:(0,N.vg)(S)}),(0,U.jsx)("option",{value:P,children:(0,N.vg)(P)})]})]})]}),I&&[_,S].includes(I)&&(0,U.jsxs)(x.Z,{mt:E.cd,children:[(0,U.jsx)(x.Z,{mb:1,children:(0,U.jsxs)(p.ZP,{bold:!0,muted:!0,children:["Message for ",I]})}),(0,U.jsx)(Z.Z,{monospace:!0,onChange:function(e){return a(e.target.value)},value:d||""})]}),(0,U.jsxs)(x.Z,{mt:E.cd,children:[(0,U.jsx)(h.Z,{beforeIcon:(0,U.jsx)(C.Bf,{size:2*E.iI}),disabled:!I||!R,loading:oe,onClick:function(){(P!==I||"undefined"!==typeof location&&window.confirm("Are you sure you want to delete branch ".concat(R,"?")))&&te({git_branch:(0,c.Z)({action_type:I,message:d},I,{base_branch:R})})},primary:!0,children:I?(0,N.vg)(I):"Execute action"}),H&&(0,U.jsx)(x.Z,{mt:E.cd,children:(0,U.jsx)(p.ZP,{default:!0,monospace:!0,preWrap:!0,children:H})})]})]})]}),(0,U.jsxs)(x.Z,{mb:E.HN,children:[(0,U.jsx)(x.Z,{mb:E.HN,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsxs)(v.Z,{children:[(0,U.jsx)(h.Z,{beforeIcon:(0,U.jsx)(C.Hd,{}),linkProps:{href:"/version-control?tab=".concat(F.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:F.uuid}),(0,U.jsx)(x.Z,{mr:1}),(0,U.jsxs)(h.Z,{afterIcon:(0,U.jsx)(C.Kw,{}),linkProps:{href:"/version-control?tab=".concat(D.uuid)},noHoverUnderline:!0,sameColorAsText:!0,secondary:!0,children:["Next: ",D.uuid]})]})]})]})},G=r(32316),R=r(12691),V=r.n(R),L=r(44182),z=r(25880),W=r(10919),q=r(87815);var Q=function(e){var n=e.branch,r=e.branches,t=e.fetchBranch,o=e.modifiedFiles,i=e.remotes,l=e.setSelectedFilePath,d=e.showError,a=e.stagedFiles,w=(0,u.useState)((null===n||void 0===n?void 0:n.name)||""),k=w[0],P=w[1],_=(0,u.useState)(null),O=_[0],S=_[1],B=(0,u.useState)(null),M=B[0],F=B[1],H=(0,u.useState)(""),T=H[0],G=H[1],R=(0,u.useState)(""),Q=R[0],K=R[1],X=y.ZP.git_branches.detail("with_logs",{_format:"with_logs"}),Y=X.data,J=X.mutate,$=(0,u.useMemo)((function(){var e;return(null===Y||void 0===Y||null===(e=Y.git_branch)||void 0===e?void 0:e.logs)||[]}),[Y]),ee=(0,u.useMemo)((function(){return(0,U.jsx)(q.Z,{columnFlex:[1,1,1],columns:[{uuid:"Author"},{uuid:"Date"},{uuid:"Message"}],rows:$.map((function(e){var n=e.author,r=e.date,t=e.message;return[(0,U.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:null===n||void 0===n?void 0:n.name},"author"),(0,U.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:r},"date"),(0,U.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:t},"message")]})),uuid:"git-branch-logs"})}),[$]),ne=(0,u.useMemo)((function(){return Object.keys(a||{})}),[a]),re=(0,u.useMemo)((function(){return ne.length}),[ne]),te=(0,f.Db)(y.ZP.git_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){J(),t(),K("")},onErrorCallback:function(e,n){return d({errors:n,response:e})}})}}),oe=(0,s.Z)(te,2),ie=oe[0],le=oe[1].isLoading,ce=(0,f.Db)(y.ZP.git_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(e){var n=e.git_branch,r=n.error,t=n.progress;r?(S(r),F(null)):(J(),P(null),S(null),G(null),F(t))},onErrorCallback:function(e,n){return d({errors:n,response:e})}})}}),se=(0,s.Z)(ce,2),de=se[0],ae=se[1].isLoading;return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(x.Z,{mb:E.HN,children:[(0,U.jsx)(x.Z,{mb:E.cd,children:(0,U.jsx)(L.Z,{children:(0,U.jsx)(z.Z,{noPaddingContent:!0,title:re>=1?"Staged files (".concat(re,")"):"No staged files",children:null===ne||void 0===ne?void 0:ne.map((function(e){return(0,U.jsx)(x.Z,{my:1,px:E.cd,children:(0,U.jsxs)(v.Z,{justifyContent:"space-between",children:[(0,U.jsx)(W.Z,{default:!0,monospace:!0,onClick:function(){return l((function(n){return n===e?null:e}))},warning:null===o||void 0===o?void 0:o[e],children:e}),(0,U.jsx)(x.Z,{mr:1}),(null===o||void 0===o?void 0:o[e])&&(0,U.jsxs)(p.ZP,{warning:!0,children:["Modified after ",(0,U.jsx)(V(),{href:"/version-control?tab=".concat(D.uuid),passHref:!0,children:(0,U.jsx)(W.Z,{underline:!0,warning:!0,children:"staging"})})]})]})},e)}))})})}),(0,U.jsx)(Z.Z,{disabled:0===re,label:"Commit message",monospace:!0,onChange:function(e){return K(e.target.value)},value:Q||""}),(0,U.jsx)(x.Z,{mt:E.cd,children:(0,U.jsxs)(v.Z,{alignItems:"center",children:[(0,U.jsxs)(h.Z,{disabled:0===re||!((null===Q||void 0===Q?void 0:Q.length)>=1),loading:le,onClick:function(){ie({git_branch:{action_type:"commit",files:ne,message:Q}})},primary:!0,children:["Commit ",(0,N._6)("file",re,!0)," with message"]}),0===re&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(x.Z,{mr:1}),(0,U.jsxs)(p.ZP,{danger:!0,small:!0,children:["Please ",(0,U.jsx)(V(),{href:"/version-control?tab=".concat(D.uuid),passHref:!0,children:(0,U.jsx)(W.Z,{danger:!0,small:!0,underline:!0,children:"stage"})})," at least 1 file before committing."]})]})]})})]}),(0,U.jsxs)(x.Z,{mb:E.HN,children:[(0,U.jsx)(x.Z,{mb:1,children:(0,U.jsx)(j.Z,{children:(0,N.vg)(I)})}),(0,U.jsxs)(x.Z,{mt:E.Mq,children:[(0,U.jsxs)(v.Z,{children:[(0,U.jsxs)("div",{children:[(0,U.jsx)(x.Z,{mb:1,children:(0,U.jsx)(p.ZP,{bold:!0,muted:!0,children:"Remote"})}),(0,U.jsx)(g.Z,{beforeIcon:(0,U.jsx)(C.VW,{}),beforeIconSize:1.5*E.iI,monospace:!0,onChange:function(e){return G(e.target.value)},placeholder:"Choose remote",value:T||"",children:null===i||void 0===i?void 0:i.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))})]}),(0,U.jsx)(x.Z,{mr:1}),(0,U.jsxs)("div",{children:[(0,U.jsx)(x.Z,{mb:1,children:(0,U.jsx)(p.ZP,{bold:!0,muted:!0,children:"Branch"})}),(0,U.jsxs)(g.Z,{beforeIcon:(0,U.jsx)(C.I0,{}),beforeIconSize:1.5*E.iI,monospace:!0,onChange:function(e){return P(e.target.value)},placeholder:"Choose branch",value:k||"",children:[(0,U.jsx)("option",{value:""}),null===r||void 0===r?void 0:r.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))]})]})]}),(0,U.jsx)(x.Z,{mt:E.cd,children:(0,U.jsxs)(h.Z,{beforeIcon:(0,U.jsx)(C.Bf,{size:2*E.iI}),disabled:!T||!k,loading:ae,onClick:function(){F(null),de({git_branch:(0,c.Z)({action_type:I},I,{branch:k,remote:T})})},primary:!0,children:[(0,N.vg)(I)," ",T," ",T&&k]})}),(M||O)&&(0,U.jsx)(x.Z,{mt:E.cd,children:(0,U.jsx)(p.ZP,{danger:!!O,default:!!M,monospace:!0,preWrap:!0,children:M||O})})]})]}),(0,U.jsxs)(x.Z,{mb:E.HN,children:[(0,U.jsx)(x.Z,{mb:1,children:(0,U.jsx)(j.Z,{children:"Logs"})}),(0,U.jsxs)(x.Z,{mt:E.Mq,children:[!Y&&(0,U.jsx)(b.Z,{inverted:!0}),Y&&ee]})]}),(0,U.jsxs)(x.Z,{mb:E.HN,children:[(0,U.jsx)(x.Z,{mb:E.HN,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsx)(v.Z,{children:(0,U.jsx)(h.Z,{beforeIcon:(0,U.jsx)(C.Hd,{}),linkProps:{href:"/version-control?tab=".concat(D.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:D.uuid})})]})]})},K=r(1210),X=r(46299),Y=r(34376),J=r(38341),$=r(93461),ee=r(38626),ne=ee.default.div.withConfig({displayName:"indexstyle__SpacingStyle",componentId:"sc-el09vr-0"})(["margin-top:","px;"],.5*E.iI),re=r(7715);function te(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function oe(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?te(Object(r),!0).forEach((function(n){(0,c.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var ie,le=function(e){var n=e.branch,r=e.fetchBranch,t=e.modifiedFiles,o=e.showError,i=e.stagedFiles,l=e.untrackedFiles,c=(0,Y.useRouter)(),d=(0,u.useState)({}),a=d[0],g=d[1],b=(0,u.useState)({}),Z=b[0],w=b[1],k=(0,u.useMemo)((function(){return Object.keys(t).concat(Object.keys(l)).sort()}),[t,l]),P=(0,u.useMemo)((function(){return Object.keys(i)}),[i]),_=(0,u.useMemo)((function(){return Object.keys(a).length===(null===k||void 0===k?void 0:k.length)}),[a,k]),O=(0,u.useMemo)((function(){return Object.keys(Z).length===(null===P||void 0===P?void 0:P.length)}),[Z,P]),I=(0,u.useMemo)((function(){return{onErrorCallback:function(e,n){return o({errors:n,response:e})}}}),[o]),S=(0,u.useMemo)((function(){return{onSuccess:function(e){return(0,A.wD)(e,oe({callback:function(){r(),g({})}},I))}}}),[r,I]),D=(0,u.useMemo)((function(){return y.ZP.git_branches.useUpdate(null===n||void 0===n?void 0:n.name)}),[n]),F=(0,f.Db)(D,S),H=(0,s.Z)(F,2),N=H[0],T=H[1].isLoading,G=(0,f.Db)(D,S),R=(0,s.Z)(G,2),V=R[0],L=R[1].isLoading,z=(0,f.Db)(D,{onSuccess:function(e){return(0,A.wD)(e,oe({callback:function(){r(),w({})}},I))}}),q=(0,s.Z)(z,2),Q=q[0],K=q[1].isLoading,X=(0,u.useCallback)((function(e,n,r,t,o){var i=(null===e||void 0===e?void 0:e.length)>=1;return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(W.Z,{block:!0,noHoverUnderline:!0,onClick:function(){r(o?{}:t)},preventDefault:!0,children:(0,U.jsxs)(v.Z,{alignItems:"center",flexDirection:"row",children:[(0,U.jsx)(J.Z,{checked:i&&o,disabled:!i}),(0,U.jsx)(x.Z,{mr:1}),(0,U.jsx)(p.ZP,{bold:!0,children:i&&o?"Unselect all":"Select all"})]})}),e.map((function(e){return(0,U.jsx)(ne,{children:(0,U.jsx)(W.Z,{block:!0,noHoverUnderline:!0,onClick:function(){return r((function(n){var r=oe({},n);return!(null!==r&&void 0!==r&&r[e])?r[e]=!0:delete r[e],r}))},preventDefault:!0,children:(0,U.jsxs)(v.Z,{alignItems:"center",flexDirection:"row",children:[(0,U.jsx)(J.Z,{checked:!(null===n||void 0===n||!n[e])}),(0,U.jsx)(x.Z,{mr:1}),(0,U.jsx)(p.ZP,{default:!0,monospace:!0,children:e})]})})},e)}))]})}),[]),ee=(0,u.useMemo)((function(){return(0,re.Qr)(a)}),[a]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(x.Z,{mb:E.HN,children:(0,U.jsxs)(v.Z,{children:[(0,U.jsxs)($.Z,{flex:1,flexDirection:"column",children:[(0,U.jsxs)(j.Z,{children:["Not staged ",(null===k||void 0===k?void 0:k.length)>=1&&"(".concat(null===k||void 0===k?void 0:k.length,")")]}),(0,U.jsx)(x.Z,{my:E.cd,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsx)(x.Z,{mb:E.cd,children:(0,U.jsxs)(v.Z,{flexDirection:"row",children:[(0,U.jsx)(h.Z,{compact:!0,disabled:ee||K||L,loading:T,onClick:function(){N({git_branch:{action_type:"add",files:Object.keys(a)}})},primary:!0,children:"Add files"}),(0,U.jsx)(x.Z,{mr:1}),(0,U.jsx)(h.Z,{compact:!0,disabled:ee||T||K,loading:L,noBackground:!0,onClick:function(){"undefined"!==typeof location&&window.confirm("Are you sure you want to undo all changes in the selected files?")&&V({git_branch:{action_type:"checkout",files:Object.keys(a)}})},children:"Checkout files"})]})}),X(k,a,g,oe(oe({},t),l),_)]}),(0,U.jsx)(x.Z,{mr:E.cd}),(0,U.jsxs)($.Z,{flex:1,flexDirection:"column",children:[(0,U.jsxs)(j.Z,{children:["Staged files ",(null===P||void 0===P?void 0:P.length)>=1&&"(".concat(null===P||void 0===P?void 0:P.length,")")]}),(0,U.jsx)(x.Z,{my:E.cd,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsx)(x.Z,{mb:E.cd,children:(0,U.jsx)(v.Z,{flexDirection:"row",children:(0,U.jsx)(h.Z,{compact:!0,disabled:(0,re.Qr)(Z)||T||L,loading:K,onClick:function(){Q({git_branch:{action_type:"reset",files:Object.keys(Z)}})},secondary:!0,children:"Reset files"})})}),X(P,Z,w,i,O)]})]})}),(0,U.jsxs)(x.Z,{mb:E.HN,children:[(0,U.jsx)(x.Z,{mb:E.HN,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsxs)(v.Z,{children:[(0,U.jsx)(h.Z,{beforeIcon:(0,U.jsx)(C.Hd,{}),linkProps:{href:"/version-control?tab=".concat(B.uuid)},noBackground:!0,noHoverUnderline:!0,sameColorAsText:!0,children:B.uuid}),(0,U.jsx)(x.Z,{mr:1}),(0,U.jsx)(h.Z,{afterIcon:(0,U.jsx)(C.Kw,{}),linkProps:ee?{href:"/version-control?tab=".concat(M.uuid)}:null,noHoverUnderline:!0,onClick:ee?null:function(){N({git_branch:{action_type:"add",files:Object.keys(a)}}).then((function(){c.push("/version-control?tab=".concat(M.uuid))}))},primary:ee,sameColorAsText:!0,secondary:!ee,children:ee?"Next: ".concat(M.uuid):"Add files and go to ".concat(M.uuid)})]})]})]})};!function(e){e.GITHUB="github"}(ie||(ie={}));var ce=r(59e3);var se=function(e){var n=e.branch,r=e.fetchBranch,t=e.loading,o=e.remotes,i=e.showError,l=(0,Y.useRouter)(),c=(0,u.useRef)(null),d=(0,u.useState)(null),a=d[0],Z=d[1],k=(0,u.useState)(null),P=k[0],_=k[1],I=(0,u.useState)(null),S=I[0],D=I[1],M=(0,u.useState)(null),F=M[0],H=M[1],T=(0,u.useState)(null),G=T[0],R=T[1],Q=(0,u.useState)(!1),K=Q[0],X=Q[1],J=(0,u.useState)(null),ee=J[0],ne=J[1],re=(0,u.useState)(""),te=re[0],oe=re[1],le=(0,u.useState)(""),se=le[0],de=le[1],ae=(0,u.useState)(null),ue=ae[0],fe=ae[1];(0,u.useEffect)((function(){var e,r;null!==n&&void 0!==n&&null!==(e=n.sync_config)&&void 0!==e&&e.repo_path&&null===ue&&fe(null===n||void 0===n||null===(r=n.sync_config)||void 0===r?void 0:r.repo_path)}),[n,ue]);var he=(0,u.useMemo)((function(){var e,n;return null===o||void 0===o||null===(e=o.find((function(e){return e.name===G})))||void 0===e||null===(n=e.refs)||void 0===n?void 0:n.map((function(e){return{name:e.name.split("".concat(G,"/"))[1]}}))}),[G,o]),me=(0,f.Db)(y.ZP.syncs.useCreate(),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){r(),X(!1)},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),ve=(0,s.Z)(me,2),je=ve[0],ge=ve[1].isLoading,xe=(0,f.Db)(y.ZP.git_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(e){var n=e.git_branch,t=n.error,o=n.progress;t?(_(t),H(null)):(r(),Z(null),_(null),D(null),H(o),R(null))},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),be=(0,s.Z)(xe,2),pe=be[0],Ze=be[1].isLoading,we=(0,f.Db)(y.ZP.git_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){r(),oe(""),de("")},onErrorCallback:function(e,n){return i({errors:n,response:e})}})}}),ke=(0,s.Z)(we,2),ye=ke[0],Ce=ke[1].isLoading,Pe=(0,f.Db)(y.ZP.git_branches.useUpdate(null===n||void 0===n?void 0:n.name),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){r(),ne(null)},onErrorCallback:function(e,n){ne(null),i({errors:n,response:e})}})}}),_e=(0,s.Z)(Pe,2),Oe=_e[0],Ie=_e[1].isLoading,Se=y.ZP.oauths.detail(ie.GITHUB,{redirect_uri:encodeURIComponent(window.location.href)}),Be=Se.data,De=Se.mutate,Me=(0,u.useMemo)((function(){return(null===Be||void 0===Be?void 0:Be.oauth)||{}}),[Be]),Fe=(0,f.Db)(y.ZP.oauths.useCreate(),{onSuccess:function(e){return(0,A.wD)(e,{callback:function(){De()},onErrorCallback:function(e,n){i({errors:n,response:e})}})}}),He=(0,s.Z)(Fe,2),Ee=He[0],Ne=He[1].isLoading,Ae=((0,ce.iV)()||{}).access_token;(0,u.useEffect)((function(){!Me||null!==Me&&void 0!==Me&&Me.authenticated||!Ae||Ee({oauth:{provider:ie.GITHUB,token:Ae}})}),[Ae,Ee,Me]);var Ue=(0,u.useMemo)((function(){return null===o||void 0===o?void 0:o.map((function(e){var n=e.name,r=e.refs,t=e.urls;return(0,U.jsxs)(x.Z,{mt:E.Mq,children:[(0,U.jsx)(x.Z,{mb:1,children:(0,U.jsxs)(v.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,U.jsxs)($.Z,{alignItems:"center",children:[(0,U.jsx)(p.ZP,{bold:!0,children:n}),(0,U.jsx)(x.Z,{mx:1,children:(0,U.jsx)(C._Q,{muted:!0})}),null===t||void 0===t?void 0:t.map((function(e){return(0,U.jsx)(x.Z,{mr:1,children:(0,U.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:e})},e)}))]}),(0,U.jsx)(x.Z,{mr:1}),(0,U.jsx)(h.Z,{compact:!0,disabled:Ie&&ee!==n,iconOnly:!0,loading:Ie&&ee===n,noBackground:!0,onClick:function(){"undefined"!==typeof location&&window.confirm("Are you sure you want to remove remote ".concat(n,"?"))&&(ne(n),Oe({git_branch:{action_type:"remove_remote",remote:{name:n}}}))},small:!0,title:"Remote remote ".concat(n),children:(0,U.jsx)(C.rF,{})})]})}),(0,U.jsx)(L.Z,{children:(0,U.jsxs)(z.Z,{noPaddingContent:!0,smallTitle:!0,title:"Refs (".concat(null===r||void 0===r?void 0:r.length,")"),children:[0===(null===r||void 0===r?void 0:r.length)&&(0,U.jsx)(x.Z,{p:E.cd,children:(0,U.jsx)(p.ZP,{muted:!0,children:"This remote has no refs."})}),(null===r||void 0===r?void 0:r.length)>=1&&(0,U.jsx)(q.Z,{columnFlex:[1,1,1],columns:[{uuid:"Ref"},{uuid:"Author"},{uuid:"Date"},{uuid:"Message"}],rows:r.map((function(e){var n,r=e.commit,t=e.name;return[(0,U.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:t},"ref-name"),(0,U.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:null===r||void 0===r||null===(n=r.author)||void 0===n?void 0:n.name},"author"),(0,U.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:null===r||void 0===r?void 0:r.date},"date"),(0,U.jsx)(p.ZP,{default:!0,monospace:!0,small:!0,children:null===r||void 0===r?void 0:r.message},"message")]})),uuid:"git-branch-remotes-refs"})]})}),(0,U.jsx)(x.Z,{mt:E.Mq,children:(0,U.jsx)(m.Z,{light:!0})})]},n)}))}),[Ie,ee,o,Oe]);return(0,U.jsxs)(U.Fragment,{children:[Be&&(0,U.jsxs)(x.Z,{mb:E.HN,children:[(null===Me||void 0===Me?void 0:Me.authenticated)&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(h.Z,{beforeIcon:(0,U.jsx)(C.fy,{size:2*E.iI}),disabled:!0,children:"Successfully authenticated with GitHub"}),(0,U.jsx)(x.Z,{mt:1,children:(0,U.jsx)(p.ZP,{muted:!0,children:"You can pull, push, and create pull requests on GitHub."})})]}),!(null!==Me&&void 0!==Me&&Me.authenticated)&&(null===Me||void 0===Me?void 0:Me.url)&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(h.Z,{beforeIcon:(0,U.jsx)(C.fy,{size:2*E.iI}),loading:Ne,onClick:function(){return l.push(null===Me||void 0===Me?void 0:Me.url)},primary:!0,children:"Authenticate with GitHub"}),(0,U.jsx)(x.Z,{mt:1,children:(0,U.jsx)(p.ZP,{muted:!0,children:"Authenticating with GitHub will allow you to pull, push, and create pull requests on GitHub."})})]})]}),(0,U.jsxs)(x.Z,{mb:E.HN,children:[(0,U.jsx)(j.Z,{children:"Setup"}),(0,U.jsxs)(x.Z,{mt:E.Mq,children:[(0,U.jsxs)(x.Z,{mb:1,children:[(0,U.jsx)(p.ZP,{bold:!0,large:!0,children:"Git init directory"}),(0,U.jsxs)(p.ZP,{muted:!0,children:["If the directory below is blank, then the current working directory will be used to initialize git.",(0,U.jsx)("br",{}),"If git hasn\u2019t been initialized in the directory below, Mage will automatically run git init for you."]})]}),(0,U.jsxs)(v.Z,{alignItems:"center",children:[(0,U.jsx)(w.Z,{disabled:!K,label:"Git directory",monospace:!0,onChange:function(e){return fe(e.target.value)},ref:c,value:ue||""}),(0,U.jsx)(x.Z,{mr:1}),K&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(h.Z,{compact:!0,loading:ge,onClick:function(){je({sync:{repo_path:ue}})},primary:!0,small:!0,children:"Save"}),(0,U.jsx)(x.Z,{mr:1}),(0,U.jsx)(W.Z,{onClick:function(){return X(!1)},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Cancel"})]}),!K&&(0,U.jsx)(W.Z,{onClick:function(){X(!0),setTimeout((function(){var e;return null===c||void 0===c||null===(e=c.current)||void 0===e?void 0:e.focus()}),1)},preventDefault:!0,sameColorAsText:!0,small:!0,children:"Edit"})]})]})]}),(0,U.jsxs)(x.Z,{mb:E.HN,children:[(0,U.jsxs)(j.Z,{children:["Remotes",!t&&o?" (".concat(null===o||void 0===o?void 0:o.length,")"):""]}),t&&(0,U.jsx)(x.Z,{mt:E.Mq,children:(0,U.jsx)(b.Z,{inverted:!0})}),!t&&Ue,(0,U.jsx)(x.Z,{mt:E.Mq,children:(0,U.jsxs)(v.Z,{alignItems:"center",children:[(0,U.jsx)(w.Z,{label:"New remote name",monospace:!0,onChange:function(e){var n;return oe(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},value:te||""}),(0,U.jsx)(x.Z,{mr:1}),(0,U.jsx)(w.Z,{label:"Remote URL",monospace:!0,onChange:function(e){var n;return de(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)},value:se||""}),(0,U.jsx)(x.Z,{mr:1}),(0,U.jsx)(h.Z,{beforeIcon:(0,U.jsx)(C.mm,{size:2*E.iI}),disabled:!te||!se,loading:Ce,onClick:function(){ye({git_branch:{action_type:"add_remote",remote:{name:te,url:se}}})},primary:!0,children:"Create new remote"})]})})]}),(0,U.jsxs)(x.Z,{mb:E.HN,children:[(0,U.jsx)(j.Z,{children:"Actions"}),(0,U.jsxs)(x.Z,{mt:E.Mq,children:[(0,U.jsxs)(x.Z,{mb:E.Mq,children:[(0,U.jsx)(x.Z,{mb:1,children:(0,U.jsx)(p.ZP,{bold:!0,muted:!0,children:"Current branch"})}),(null===n||void 0===n?void 0:n.name)&&(0,U.jsxs)(v.Z,{alignItems:"center",children:[(0,U.jsx)(p.ZP,{monospace:!0,children:null===n||void 0===n?void 0:n.name}),(0,U.jsx)(x.Z,{mr:E.cd}),(0,U.jsx)(V(),{href:"/version-control?tab=".concat(B.uuid),passHref:!0,children:(0,U.jsx)(W.Z,{small:!0,children:"Switch branch"})})]})]}),(0,U.jsxs)(v.Z,{children:[(0,U.jsx)(g.Z,{onChange:function(e){return D(e.target.value)},placeholder:"Action",value:S||"",children:(0,U.jsx)("option",{value:O,children:(0,N.vg)(O)})}),(0,U.jsx)(x.Z,{mr:1}),(0,U.jsx)(g.Z,{beforeIcon:(0,U.jsx)(C.VW,{}),beforeIconSize:1.5*E.iI,monospace:!0,onChange:function(e){return R(e.target.value)},placeholder:"Remote",value:G||"",children:null===o||void 0===o?void 0:o.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))}),(0,U.jsx)(x.Z,{mr:1}),(0,U.jsxs)(g.Z,{beforeIcon:(0,U.jsx)(C.I0,{}),beforeIconSize:1.5*E.iI,monospace:!0,onChange:function(e){return Z(e.target.value)},value:a||"",children:[(0,U.jsx)("option",{value:"",children:"All branches"}),null===he||void 0===he?void 0:he.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))]})]}),(0,U.jsxs)(x.Z,{mt:E.cd,children:[(0,U.jsx)(h.Z,{beforeIcon:(0,U.jsx)(C.Bf,{size:2*E.iI}),disabled:!S||!G,loading:Ze,onClick:function(){H(null),pe({git_branch:{action_type:S,pull:{branch:a,remote:G}}})},primary:!0,children:S?(0,N.vg)(S):"Execute action"}),(F||P)&&(0,U.jsx)(x.Z,{mt:E.cd,children:(0,U.jsx)(p.ZP,{danger:!!P,default:!!F,monospace:!0,preWrap:!0,children:F||P})})]})]})]}),(0,U.jsxs)(x.Z,{mb:E.HN,children:[(0,U.jsx)(x.Z,{mb:E.HN,children:(0,U.jsx)(m.Z,{light:!0})}),(0,U.jsx)(v.Z,{children:(0,U.jsxs)(h.Z,{afterIcon:(0,U.jsx)(C.Kw,{}),linkProps:{href:"/version-control?tab=".concat(B.uuid)},noHoverUnderline:!0,sameColorAsText:!0,secondary:!0,children:["Next: ",B.uuid]})})]})]})},de=r(2005),ae=ee.default.div.withConfig({displayName:"indexstyle__DiffContainerStyle",componentId:"sc-1fo4nus-0"})(["pre{font-family:",";}"],de.Vp),ue={codeFoldGutter:{},content:{},contentText:{},diffAdded:{},diffContainer:{},diffRemoved:{},emptyGutter:{},emptyLine:{},gutter:{},highlightedGutter:{},highlightedLine:{},line:{},lineNumber:{},marker:{},splitView:{},titleBlock:{},variables:{dark:{addedBackground:"#044B53",addedColor:"white",addedGutterBackground:"#034148",addedGutterColor:"#8c8c8c",codeFoldBackground:"#262831",codeFoldContentColor:"#555a7b",codeFoldGutterBackground:"#21232b",diffViewerBackground:"#2e303c",diffViewerColor:"#FFF",diffViewerTitleBackground:"#2f323e",diffViewerTitleBorderColor:"#353846",diffViewerTitleColor:"#555a7b",emptyLineBackground:"#363946",gutterBackground:"#2c2f3a",gutterBackgroundDark:"#262933",gutterColor:"#464c67",highlightBackground:"#2a3967",highlightGutterBackground:"#2d4077",removedBackground:"#632F34",removedColor:"white",removedGutterBackground:"#632b30",removedGutterColor:"#8c8c8c",wordAddedBackground:"#055d67",wordRemovedBackground:"#7d383f"},light:{addedBackground:"#e6ffed",addedColor:"#24292e",addedGutterBackground:"#cdffd8",addedGutterColor:"#212529",codeFoldBackground:"#f1f8ff",codeFoldContentColor:"#212529",codeFoldGutterBackground:"#dbedff",diffViewerBackground:"#fff",diffViewerColor:"212529",diffViewerTitleBackground:"#fafbfc",diffViewerTitleBorderColor:"#eee",diffViewerTitleColor:"#212529",emptyLineBackground:"#fafbfc",gutterBackground:"#f7f7f7",gutterBackgroundDark:"#f3f1f1",gutterColor:"#212529",highlightBackground:"#fffbdd",highlightGutterBackground:"#fff5b1",removedBackground:"#ffeef0",removedColor:"#24292e",removedGutterBackground:"#ffdce0",removedGutterColor:"#212529",wordAddedBackground:"#acf2bd",wordRemovedBackground:"#fdb8c0"}},wordAdded:{},wordDiff:{},wordRemoved:{}},fe=r(32821),he=r(33766),me=r(9728);function ve(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function je(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ve(Object(r),!0).forEach((function(n){(0,c.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var ge=function(){var e=(0,u.useRef)(null),n=(0,u.useRef)(null),r=(0,me.VI)(null,{},[],{uuid:"VersionControlPage"}),t=(0,s.Z)(r,1)[0],o=(0,u.useState)(null),i=o[0],l=o[1],f=(0,u.useState)(null),h=f[0],v=f[1],j=(0,u.useState)(H[0]),Z=j[0],w=j[1],C=(0,ce.iV)();(0,u.useEffect)((function(){null!==C&&void 0!==C&&C.tab&&w(H.find((function(e){return e.uuid===(null===C||void 0===C?void 0:C.tab)})))}),[C]);var P=y.ZP.git_branches.list(),_=P.data,O=P.mutate,I=(0,u.useMemo)((function(){return null===_||void 0===_?void 0:_.git_branches}),[_]),S=y.ZP.git_branches.detail("current"),N=S.data,A=S.mutate,R=(0,u.useMemo)((function(){return(null===N||void 0===N?void 0:N.git_branch)||{}}),[N]),V=(0,u.useMemo)((function(){return(null===R||void 0===R?void 0:R.files)||[]}),[R]),L=y.ZP.git_branches.detail("with_remotes",{_format:"with_remotes"}),z=L.data,W=L.mutate,q=(0,u.useMemo)((function(){return null===z||void 0===z?void 0:z.git_branch}),[z]),Y=(0,u.useMemo)((function(){return(null===q||void 0===q?void 0:q.remotes)||[]}),[q]),J=y.ZP.git_files.detail(h?encodeURIComponent(h):null,{base_branch:i}),$=J.data,ee=J.mutate,ne=(0,u.useMemo)((function(){return null===$||void 0===$?void 0:$.git_file}),[$]);(0,u.useEffect)((function(){i&&ee()}),[i,ee]),(0,u.useEffect)((function(){null!==$&&void 0!==$&&$.error&&t({errors:null===$||void 0===$?void 0:$.error,response:$})}),[$,t]);var te=(0,u.useMemo)((function(){var e,n,r;return{modifiedFiles:null===R||void 0===R||null===(e=R.modified_files)||void 0===e?void 0:e.reduce((function(e,n){return je(je({},e),{},(0,c.Z)({},n,!0))}),{}),stagedFiles:null===R||void 0===R||null===(n=R.staged_files)||void 0===n?void 0:n.reduce((function(e,n){return je(je({},e),{},(0,c.Z)({},n,!0))}),{}),untrackedFiles:null===R||void 0===R||null===(r=R.untracked_files)||void 0===r?void 0:r.reduce((function(e,n){return je(je({},e),{},(0,c.Z)({},n,!0))}),{})}}),[R]),oe=te.modifiedFiles,ie=void 0===oe?{}:oe,de=te.stagedFiles,ve=void 0===de?{}:de,ge=te.untrackedFiles,xe=void 0===ge?{}:ge;(0,u.useEffect)((function(){h&&(0,re.Qr)(ie)&&(0,re.Qr)(ve)&&(0,re.Qr)(xe)&&v(null)}),[ie,h,ve,xe]);var be=(0,u.useMemo)((function(){return(null===V||void 0===V?void 0:V.length)>=1?(0,U.jsx)(X.Z,{allowEmptyFolders:!0,disableContextMenu:!0,fetchFileTree:A,files:V,isFileDisabled:function(){return!1},onClickFile:function(e){v((function(r){if(!r||r!==e){var t;if(!i)null===n||void 0===n||null===(t=n.current)||void 0===t||t.focus();return e}return null}))},ref:e,renderAfterContent:function(e){var n,r,t=e.children,o=(null===t||void 0===t?void 0:t.length)>=1,i=(0,fe.a9)(e);o&&(i="".concat(i,"/"));var l={};return null!==ie&&void 0!==ie&&ie[i]?(n="M",r="Modified",l.warning=!0):null!==xe&&void 0!==xe&&xe[i]?(n="U",r="Untracked",l.danger=!0):null!==ve&&void 0!==ve&&ve[i]&&(n="S",r="Staged",l.success=!0),o&&!n?null:(0,U.jsx)(x.Z,{mx:1,children:(0,U.jsx)(k.Z,{appearBefore:!0,label:r,widthFitContent:!0,children:(0,U.jsx)(p.ZP,je(je({},l),{},{monospace:!0,rightAligned:!0,small:!0,children:n}))})})},useRootFolder:!0}):(0,U.jsx)(x.Z,{p:E.cd,children:(0,U.jsx)(p.ZP,{monospace:!0,muted:!0,children:"No files modified"})})}),[i,A,e,V,ie,n,v,ve,xe]),pe=(0,u.useMemo)((function(){return!$||!ne||h&&(null===ne||void 0===ne?void 0:ne.filename)!==h}),[$,ne,h]),Ze=(0,u.useMemo)((function(){if(!h)return null;var e=ne||{},n=e.content,r=e.content_from_base;return(0,U.jsxs)(ae,{children:[!i&&(0,U.jsx)(x.Z,{p:E.cd,children:(0,U.jsx)(p.ZP,{muted:!0,children:"Please select a base branch to see the file diffs."})}),(null===ne||void 0===ne?void 0:ne.error)&&(0,U.jsx)(x.Z,{p:E.cd,children:(0,U.jsx)(p.ZP,{danger:!0,monospace:!0,preWrap:!0,children:null===ne||void 0===ne?void 0:ne.error})}),i&&!(null!==ne&&void 0!==ne&&ne.error)&&(0,U.jsxs)(U.Fragment,{children:[pe&&(0,U.jsx)(x.Z,{p:E.cd,children:(0,U.jsx)(b.Z,{inverted:!0})}),!pe&&(0,U.jsx)(a(),{compareMethod:d.DiffMethod.WORDS,newValue:n||"",oldValue:r||"",renderContent:function(e){return(0,U.jsx)(p.ZP,{monospace:!0,children:e})},splitView:!0,styles:ue,useDarkTheme:!0})]})]})}),[i,ne,pe,h]),we=(0,u.useMemo)((function(){return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("div",{style:{marginBottom:.5*E.iI,marginTop:.5*E.iI},children:(0,U.jsx)(G.Z,{compact:!0,onClickTab:function(e){var n=e.uuid;(0,he.u7)({tab:n})},selectedTabUUID:null===Z||void 0===Z?void 0:Z.uuid,tabs:H})}),(0,U.jsx)(m.Z,{light:!0})]})}),[Z]),ke=(0,u.useMemo)((function(){return(0,U.jsx)(se,{branch:R,fetchBranch:W,loading:!z,remotes:Y,showError:t})}),[R,z,W,Y,t]),ye=(0,u.useMemo)((function(){return(0,U.jsx)(T,{branch:R,branches:I,fetchBranch:A,fetchBranches:O,showError:t})}),[R,I,A,O,t]),Ce=(0,u.useMemo)((function(){return(0,U.jsx)(le,{branch:R,fetchBranch:A,modifiedFiles:ie,showError:t,stagedFiles:ve,untrackedFiles:xe})}),[R,A,ie,t,ve,xe]),Pe=(0,u.useMemo)((function(){return(0,U.jsx)(Q,{branch:R,branches:I,fetchBranch:A,modifiedFiles:ie,remotes:Y,setSelectedFilePath:v,showError:t,stagedFiles:ve})}),[R,I,A,ie,Y,v,t,ve]);return(0,U.jsx)(K.Z,{after:Ze,afterHidden:!h,before:(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(x.Z,{p:1,children:(0,U.jsx)(g.Z,{compact:!0,label:"Base branch",onChange:function(e){return l(e.target.value)},ref:n,small:!0,value:i||"",children:null===I||void 0===I?void 0:I.map((function(e){var n=e.name;return(0,U.jsx)("option",{value:n,children:n},n)}))})}),be]}),mainContainerHeader:we,title:"Version control",uuid:"Version control/index",children:(0,U.jsxs)(x.Z,{p:E.cd,children:[!N&&(0,U.jsx)(b.Z,{inverted:!0}),N&&(0,U.jsxs)(U.Fragment,{children:[F.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&ke,B.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&ye,D.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&Ce,M.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&Pe]})]})})};function xe(){return(0,U.jsx)(ge,{})}xe.getInitialProps=(0,t.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var be=(0,l.Z)(xe)},75302:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/version-control",function(){return r(83243)}])}},function(e){e.O(0,[844,7607,7011,4407,1424,1005,7815,3714,551,9774,2888,179],(function(){return n=75302,e(e.s=n);var n}));var n=e.O();_N_E=n}]);