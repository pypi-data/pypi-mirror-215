{"version":3,"sources":["stChat.tsx","index.tsx"],"names":["hljs","configure","cssSelector","Message","styled","div","display","border","borderRadius","padding","margin","maxWidth","Avatar","img","height","width","ChatMessage","flex","withStreamlitConnection","props","_props$args","args","isUser","avatarStyle","seed","message","logo","allowHTML","extLinks","avatarUrl","concat","theme","chatStyle","flexDirection","fontFamily","font","messageStyle","background","secondaryBackgroundColor","messageRef","React","useRef","mdFormat","useEffect","highlightAll","resizeObserver","ResizeObserver","Streamlit","setFrameHeight","current","observe","disconnect","codes","getElementsByTagName","_loop","pre","button","document","createElement","innerHTML","className","addEventListener","navigator","clipboard","writeText","innerText","style","position","appendChild","length","ref","onLoad","console","log","src","Markdown","options","overrides","a","component","target","undefined","ReactDOM","render","StrictMode","Chat","getElementById"],"mappings":"iSAcAA,IAAKC,UAAU,CACbC,YAAa,aAGf,IAAMC,EAAUC,IAAOC,IAAI,CACzBC,QAAS,eAETC,OAAQ,wBACRC,aAAc,OACdC,QAAS,YACTC,OAAQ,WACRC,SAAU,QAGNC,EAASR,IAAOS,IAAI,CACxBN,OAAO,wBACPC,aAAc,MACdM,OAAQ,OACRC,MAAO,OACPL,OAAQ,IAGJM,EAAcZ,IAAOC,IAAI,CAC7BC,QAAS,OACTI,OAAQ,EACRK,MAAO,OACPE,KAAM,MA8EOC,eA3E0B,SAACC,GACxC,IAAAC,EAA0ED,EAAME,KAAxEC,EAAMF,EAANE,OAAQC,EAAWH,EAAXG,YAAaC,EAAIJ,EAAJI,KAAMC,EAAOL,EAAPK,QAASC,EAAIN,EAAJM,KAAMC,EAASP,EAATO,UAAWC,EAAQR,EAARQ,SACvDC,EAAcH,GAAW,gCAAAI,OAAmCP,EAAW,cAAAO,OAAaN,GAClFO,EAAUZ,EAAVY,MAEFC,EAAiC,CACrCC,cAAeX,EAAS,cAAgB,MACxCY,WAAW,GAADJ,OAAU,OAALC,QAAK,IAALA,OAAK,EAALA,EAAOI,KAAI,uCAGtBC,EAAe,CACnBC,WAAiB,OAALN,QAAK,IAALA,OAAK,EAALA,EAAOO,0BAGfC,EAAaC,IAAMC,OAAuB,MAC1CC,EAAWf,IAAa,EAsC9B,OAnCAgB,qBAAU,WACR3C,IAAK4C,kBAIPD,qBAAU,WACR,IAAME,EAAiB,IAAIC,gBAAe,WACxCC,IAAUC,oBAKZ,OAHIT,EAAWU,SACbJ,EAAeK,QAAQX,EAAWU,SAE7B,WACLJ,EAAeM,gBAEhB,CAACZ,IAGJI,qBAAU,WACR,GAAIJ,EAAWU,QAEX,IADF,IAAMG,EAAQb,EAAWU,QAAQI,qBAAqB,QAAOC,EAAA,SAAAC,GAEzD,IAAMC,EAASC,SAASC,cAAc,UACtCF,EAAOG,UAAY,eACnBH,EAAOI,UAAY,cACnBJ,EAAOK,iBAAiB,SAAS,WAC/BC,UAAUC,UAAUC,UAAUZ,EAAMG,GAAKU,cAE3Cb,EAAMG,GAAKW,MAAMC,SAAW,WAC5Bf,EAAMG,GAAKa,YAAYZ,IARjBD,EAAM,EAAGA,EAAMH,EAAMiB,OAAQd,IAAKD,EAAAC,KAW7C,CAAChB,IAGGC,IAAAkB,cAAC1C,EAAW,CAACkD,MAAOlC,EAAWsC,IAAK/B,EACzCgC,OAAQ,WACNxB,IAAUC,iBACVwB,QAAQC,IAAI,YAGdjC,IAAAkB,cAAC9C,EAAM,CAAC8D,IAAK7C,IACbW,IAAAkB,cAACvD,EAAO,CAAC+D,MAAO9B,GACbM,EACCF,IAAAkB,cAACiB,IAAQ,CACPC,QAAS,CACPC,UAAWjD,EAAW,CACpBkD,EAAG,CAAEC,UAAW,IAAK5D,MAAO,CAAE6D,OAAQ,iBACpCC,IAENxD,GACDA,O,OC3GTyD,IAASC,OACP3C,IAAAkB,cAAClB,IAAM4C,WAAU,KACf5C,IAAAkB,cAAC2B,EAAI,OAEP5B,SAAS6B,eAAe,W","file":"static/js/main.0d7b3492.chunk.js","sourcesContent":["import {\n  // eslint-disable-next-line \n  Streamlit,\n  ComponentProps,\n  withStreamlitConnection,\n} from \"streamlit-component-lib\"\nimport React, { useEffect } from \"react\"\nimport styled from '@emotion/styled'\n\nimport Markdown from 'markdown-to-jsx'\n\nimport hljs from \"highlight.js\"\nimport \"highlight.js/styles/base16/dracula.css\"\n\nhljs.configure({\n  cssSelector: \"pre code\"\n})\n\nconst Message = styled.div({\n  display: 'inline-block',\n\n  border: '1px solid transparent',\n  borderRadius: '10px',\n  padding: '10px 2rem',\n  margin: '5px 20px',\n  maxWidth: '80%',\n})\n\nconst Avatar = styled.img({\n  border: `1px solid transparent`,\n  borderRadius: '50%',\n  height: '3rem',\n  width: '3rem',\n  margin: 0\n})\n\nconst ChatMessage = styled.div({\n  display: 'flex',\n  margin: 0,\n  width: '100%',\n  flex: '1',\n})\n\nconst ChatUI: React.FC<ComponentProps> = (props) => {\n  const { isUser, avatarStyle, seed, message, logo, allowHTML, extLinks } = props.args;\n  const avatarUrl = !!logo ? logo : `https://api.dicebear.com/5.x/${avatarStyle}/svg?seed=${seed}`\n  const { theme } = props\n\n  const chatStyle: React.CSSProperties = {\n    flexDirection: isUser ? 'row-reverse' : 'row',\n    fontFamily: `${theme?.font}, 'Segoe UI', 'Roboto', sans-serif`,\n  }\n\n  const messageStyle = {\n    background: theme?.secondaryBackgroundColor,\n  }\n\n  const messageRef = React.useRef<HTMLDivElement>(null)\n  const mdFormat = allowHTML || false\n\n  // Highlight code blocks\n  useEffect(() => {\n    hljs.highlightAll()\n  });\n\n  // Watch for changes in the element and auto update the frame height\n  useEffect(() => {\n    const resizeObserver = new ResizeObserver(() => {\n      Streamlit.setFrameHeight()\n    })\n    if (messageRef.current) {\n      resizeObserver.observe(messageRef.current)\n    }\n    return () => {\n      resizeObserver.disconnect()\n    }\n  }, [messageRef])\n\n  // Copy code to clipboard\n  useEffect(() => {\n    if (messageRef.current) {\n      const codes = messageRef.current.getElementsByTagName('code')\n        for(let pre = 0; pre < codes.length; pre++) {\n          const button = document.createElement('button')\n          button.innerHTML = 'ðŸ“‹'\n          button.className = 'copy-button'\n          button.addEventListener('click', () => {\n            navigator.clipboard.writeText(codes[pre].innerText)\n          })\n          codes[pre].style.position = 'relative'\n          codes[pre].appendChild(button)\n        }\n    }    \n  }, [messageRef])\n    \n\n  return <ChatMessage style={chatStyle} ref={messageRef}\n    onLoad={() => {\n      Streamlit.setFrameHeight()\n      console.log('onLoad')\n    }}\n  >\n    <Avatar src={avatarUrl} />\n    <Message style={messageStyle}>\n      {mdFormat ?\n        <Markdown\n          options={{\n            overrides: extLinks ? {\n              a: { component: 'a', props: { target: \"_blank\" } }\n            } : undefined,\n          }}\n        >{message}</Markdown> :\n         message \n      }\n    </Message>\n  </ChatMessage>\n}\n\nexport default withStreamlitConnection(ChatUI);\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport Chat from \"./stChat\"\nimport \"./index.css\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <Chat />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}