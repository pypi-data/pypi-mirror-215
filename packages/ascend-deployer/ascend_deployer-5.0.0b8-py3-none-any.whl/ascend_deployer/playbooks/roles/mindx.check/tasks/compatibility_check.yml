- name: check compatibility for specified host
  shell: "{{ hostvars['localhost'].discovered_interpreter_python }} {{ script_path}} {{ fact_path_dir }} {{ inventory_hostname }} {{ check_tags }}"
  delegate_to: localhost
  failed_when: false
  register: check_result

- name: check result
  fail:
    msg:  "{{ check_result.stdout }}"
  when: check_result.rc != 0
