{
  "variables": {
    "metadata": ".",
    "extracted": ".extracted_metadata",
    "graph": ".extracted_metadata[\"@graph\"]?"
  },
  "properties": [
    {
      "name": "type",
      "program": ".type",
      "input": "metadata"
    },
    {
      "name": "dataset_id",
      "program": ".dataset_id",
      "input": "metadata"
    },
    {
      "name": "dataset_version",
      "program": ".dataset_version",
      "input": "metadata"
    },
    {
      "name": "name",
      "program": ".title",
      "input": "extracted"
    },
    {
      "name": "short_name",
      "program": null,
      "input": ""
    },
    {
      "name": "description",
      "program": ".description",
      "input": "extracted"
    },
    {
      "name": "doi",
      "program": null,
      "input": ""
    },
    {
      "name": "url",
      "program": null,
      "input": []
    },
    {
      "name": "license",
      "program": ".license | { \"name\": .name, \"url\": .url}",
      "input": "extracted"
    },
    {
      "name": "authors",
      "program": "[.authors[]? | {\"name\":\"\", \"givenName\":.firstname, \"familyName\":.lastname, \"email\":\"\", \"honorificSuffix\":\"\"} + if has(\"id\") then {\"identifiers\":[ {\"type\":(.id | tostring | split(\":\") | .[0]), \"identifier\":(.id | tostring | split(\":\") | .[1])}]} else null end]",
      "input": "extracted"
    },
    {
      "name": "keywords",
      "program": ".keywords",
      "input": "extracted"
    },
    {
      "name": "funding",
      "program": "[.funding[]? as $element | {\"name\": $element, \"identifier\": \"\", \"description\": \"\"}]",
      "input": "extracted"
    },
    {
      "name": "publications",
      "program": "[.references[]? as $pubin | {\"type\":\"\", \"title\":$pubin[\"citation\"], \"doi\":($pubin[\"id\"] | sub(\"DOI:\"; \"https://www.doi.org/\")), \"datePublished\":\"\", \"publicationOutlet\":\"\", \"authors\": []}]",
      "input": "extracted"
    },
    {
      "name": "subdatasets",
      "program": null,
      "input": []
    },
    {
      "name": "children",
      "program": null,
      "input": []
    },
    {
      "name": "extractors_used",
      "program": "[{\"extractor_name\": .extractor_name, \"extractor_version\": .extractor_version, \"extraction_parameter\": .extraction_parameter, \"extraction_time\": .extraction_time, \"agent_name\": .agent_name, \"agent_email\": .agent_email,}]",
      "input": "metadata"
    }
  ]
}

