{
  "variables": {
    "metadata": ".",
    "extracted": ".extracted_metadata",
    "graph": ".extracted_metadata[\"@graph\"]?"
  },
  "properties": [
    {
      "name": "type",
      "program": ".type",
      "input": "metadata"
    },
    {
      "name": "dataset_id",
      "program": ".dataset_id",
      "input": "metadata"
    },
    {
      "name": "dataset_version",
      "program": ".dataset_version",
      "input": "metadata"
    },
    {
      "name": "name",
      "program": ".Name",
      "input": "extracted"
    },
    {
      "name": "short_name",
      "program": null,
      "input": ""
    },
    {
      "name": "description",
      "program": ".description",
      "input": "extracted"
    },
    {
      "name": "doi",
      "program": null,
      "input": ""
    },
    {
      "name": "url",
      "program": null,
      "input": []
    },
    {
      "name": "license",
      "program": "{\"name\": .License, \"url\": \"\"}",
      "input": "extracted"
    },
    {
      "name": "authors",
      "program": "[.Authors[]? as $auth | {\"name\": $auth, \"givenName\":\"\", \"familyName\":\"\", \"email\":\"\", \"honorificSuffix\":\"\", \"identifiers\":[]}]",
      "input": "extracted"
    },
    {
      "name": "keywords",
      "program": ". as $parent | .entities.task + .variables.dataset",
      "input": "extracted"
    },
    {
      "name": "funding",
      "program": "[.Funding[]? as $fund | {\"name\": \"\", \"grant\":\"\", \"description\":$fund}]",
      "input": "extracted"
    },
    {
      "name": "publications",
      "program": null,
      "input": []
    },
    {
      "name": "subdatasets",
      "program": null,
      "input": []
    },
    {
      "name": "children",
      "program": null,
      "input": []
    },
    {
      "name": "extractors_used",
      "program": "[{\"extractor_name\": .extractor_name, \"extractor_version\": .extractor_version, \"extraction_parameter\": .extraction_parameter, \"extraction_time\": .extraction_time, \"agent_name\": .agent_name, \"agent_email\": .agent_email,}]",
      "input": "metadata"
    },
    {
      "name": "additional_display",
      "program": "[{\"name\": \"BIDS\", \"content\": .entities}]",
      "input": "extracted"
    },
    {
      "name": "top_display",
      "program": "[{\"name\": \"Subjects\", \"value\": (.entities.subject | length)}, {\"name\": \"Sessions\", \"value\": (.entities.session | length)}, {\"name\": \"Tasks\", \"value\": (.entities.task | length)}, {\"name\": \"Runs\", \"value\": (.entities.run | length)}]",
      "input": "extracted"
    }
  ]
}

