{
  "variables": {
    "metadata": ".",
    "extracted": ".extracted_metadata",
    "graph": ".extracted_metadata[\"@graph\"]?"
  },
  "properties": [
    {
      "name": "type",
      "program": ".type",
      "input": "metadata"
    },
    {
      "name": "dataset_id",
      "program": ".dataset_id",
      "input": "metadata"
    },
    {
      "name": "dataset_version",
      "program": ".dataset_version",
      "input": "metadata"
    },
    {
      "name": "name",
      "program": null,
      "input": ""
    },
    {
      "name": "short_name",
      "program": null,
      "input": ""
    },
    {
      "name": "description",
      "program": null,
      "input": ""
    },
    {
      "name": "doi",
      "program": null,
      "input": ""
    },
    {
      "name": "url",
      "program": ".[]? | select(.[\"@type\"] == \"Dataset\") | [.distribution[]? | select(has(\"url\")) | .url]",
      "input": "graph"
    },
    {
      "name": "license",
      "program": null,
      "input": {}
    },
    {
      "name": "authors",
      "program": "[.[]? | select(.[\"@type\"]==\"agent\")] | map(del(.[\"@id\"], .[\"@type\"]))",
      "input": "graph"
    },
    {
      "name": "keywords",
      "program": null,
      "input": []
    },
    {
      "name": "funding",
      "program": null,
      "input": []
    },
    {
      "name": "publications",
      "program": null,
      "input": []
    },
    {
      "name": "subdatasets",
      "program": ".[]? | select(.[\"@type\"] == \"Dataset\") | [.hasPart[]? | {\"dataset_id\": (.[\"identifier\"] // \"\" | sub(\"^datalad:\"; \"\")), \"dataset_version\": (.[\"@id\"] | sub(\"^datalad:\"; \"\")), \"dataset_path\": .[\"name\"], \"dirs_from_path\": []}]",
      "input": "graph"
    },
    {
      "name": "children",
      "program": null,
      "input": []
    },
    {
      "name": "extractors_used",
      "program": "[{\"extractor_name\": .extractor_name, \"extractor_version\": .extractor_version, \"extraction_parameter\": .extraction_parameter, \"extraction_time\": .extraction_time, \"agent_name\": .agent_name, \"agent_email\": .agent_email,}]",
      "input": "metadata"
    }
  ]
}

