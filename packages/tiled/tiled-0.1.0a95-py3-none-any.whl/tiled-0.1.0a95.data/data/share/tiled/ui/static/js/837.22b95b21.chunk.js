"use strict";(self.webpackChunktiled=self.webpackChunktiled||[]).push([[837],{17837:function(n,e,t){t.r(e),t.d(e,{default:function(){return b}});var r=t(15861),a=t(70885),u=t(87757),s=t.n(u),i=t(72791),c=t(26445),o=t(1413),f=t(20393),l=t(64554),p=t(46348),d=t(16871),m=t(80184);function g(){return(0,m.jsxs)(f.DSK,{children:[(0,m.jsx)(f.ShC,{}),(0,m.jsx)(f.Le$,{})]})}var h=function(n){var e=(0,d.s0)(),t=[{field:"id",headerName:"ID",flex:1,hide:!n.defaultColumns.includes("id")}];n.columns.map((function(e){return t.push({field:e.field,headerName:e.header,flex:1,hide:!n.defaultColumns.includes(e.field)})}));var u=(0,i.useState)({page:0,pageSize:10,rows:[],loading:!1}),h=(0,a.Z)(u,2),x=h[0],v=h[1],Z=(0,i.useState)({}),b=(0,a.Z)(Z,2),w=b[0],S=b[1],C=(0,i.useState)(0),j=(0,a.Z)(C,2),k=j[0],y=j[1];return(0,i.useEffect)((function(){var e=!0;function t(){return a.apply(this,arguments)}function a(){return(a=(0,r.Z)(s().mark((function e(){var t,r,a,u,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new AbortController,0===n.columns.length?(r=[],t=null):(r=["metadata"],t="{"+n.columns.map((function(n){return"".concat(n.field,":").concat(n.select_metadata)})).join(",")+"}"),e.next=4,(0,p.yC)(n.segments,a.signal,r,t,x.pageSize*x.page,x.pageSize);case 4:return u=e.sent,y(u.meta.count),i=u.data,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.Z)(s().mark((function r(){var a,u,i;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return v((function(n){return(0,o.Z)((0,o.Z)({},n),{},{loading:!0})})),r.next=3,t();case 3:if(a=r.sent,u={},a.map((function(n){return u[n.id]=n.attributes.ancestors,null})),i=a.map((function(e){var t={};return t.id=e.id,n.columns.map((function(n){return t[n.field]=e.attributes.metadata[n.field],null})),t})),e){r.next=9;break}return r.abrupt("return");case 9:S(u),v((function(n){return(0,o.Z)((0,o.Z)({},n),{},{loading:!1,rows:i})}));case 11:case"end":return r.stop()}}),r)})))(),function(){e=!1}}),[x.page,x.pageSize,n.columns,n.segments]),(0,m.jsx)(l.Z,{sx:{my:4},children:(0,m.jsx)(c.Z,{maxWidth:"lg",children:(0,m.jsx)(f._$r,(0,o.Z)((0,o.Z)({columns:t,pagination:!0,rowCount:k},x),{},{paginationMode:"server",rowsPerPageOptions:[10,30,100],onPageChange:function(n){return v((function(e){return(0,o.Z)((0,o.Z)({},e),{},{page:n})}))},onPageSizeChange:function(n){v((function(e){return(0,o.Z)((0,o.Z)({},e),{},{pageSize:n})}))},onRowClick:function(n){e("/browse".concat(w[n.id].map((function(n){return"/"+n})).join(""),"/").concat(n.id))},components:{Toolbar:g},disableColumnFilter:!0,autoHeight:!0}))})})},x=t(47047),v=t(20890),Z=t(9478),b=function(n){var e=(0,i.useState)(),t=(0,a.Z)(e,2),u=t[0],o=t[1];if((0,i.useEffect)((function(){var n=new AbortController;function e(){return e=(0,r.Z)(s().mark((function e(){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Z.M)(n.signal);case 2:t=e.sent,r=t.specs,o(r);case 5:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){n.abort()}}),[]),void 0===u)return(0,m.jsx)(x.Z,{variant:"rectangular"});var f,l,p=u.find((function(e){return n.item.data.attributes.specs.includes(e.spec)}));return void 0===p?(f=[],l=["id"]):(f=p.columns,l=p.default_columns),(0,m.jsxs)(c.Z,{maxWidth:"lg",children:[(0,m.jsx)(v.Z,{id:"table-title",variant:"h6",component:"h2",children:"Contents"}),(0,m.jsx)(h,{segments:n.segments,specs:n.item.data.attributes.specs,columns:f,defaultColumns:l})]})}},9478:function(n,e,t){t.d(e,{M:function(){return f}});var r=t(70885),a=t(15861),u=t(87757),s=t.n(u),i=t(88705),c=function(){var n=(0,a.Z)(s().mark((function n(e){var t,r,a;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat("/ui","/configuration_manifest.yml"),{signal:e});case 2:return t=n.sent,n.next=5,t.text();case 5:return r=n.sent,a=i.ZP.load(r),n.abrupt("return",a.manifest);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),o=function(){var n=(0,a.Z)(s().mark((function n(e,t){var r,a,u;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat("/ui","/").concat(e),{signal:t});case 2:return r=n.sent,n.next=5,r.text();case 5:return a=n.sent,u=i.ZP.load(a),n.abrupt("return",u);case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),f=function(){var n=(0,a.Z)(s().mark((function n(e){var t,a,u,i,f;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==(t=sessionStorage.getItem("config"))){n.next=14;break}return n.next=4,c(e);case 4:return u=n.sent,n.next=7,Promise.all(u.map((function(n){return o(n,e)})));case 7:return i=n.sent,f={specs:[],structure_families:{}},i.map((function(n,e){(n.specs||[]).map((function(n){f.specs.push(n)}));for(var t=0,a=Object.entries(n.structure_families||{});t<a.length;t++){var s=(0,r.Z)(a[t],2),i=s[0],c=s[1];f.structure_families[i]=c}console.log("Loaded config ".concat(u[e]))})),sessionStorage.setItem("config",JSON.stringify(f)),n.abrupt("return",f);case 14:return a=t,n.abrupt("return",JSON.parse(a));case 16:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}]);
//# sourceMappingURL=837.22b95b21.chunk.js.map