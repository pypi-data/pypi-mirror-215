import{aH as g,d as v,f as k,E as F,y as I,aI as N,a1 as S,c as x,g as D,i as e,h as J,w as m,j as B,o as O,m as p,aJ as T,aK as b,aL as E,aM as M,Y as d,aF as i}from"./index-9c193a50.js";import{u as P}from"./usePageTitle-e0c085d0.js";class U extends g{parse(t){return JSON.parse(decodeURIComponent(t??""))}format(t){return encodeURIComponent(JSON.stringify(t))}}const z=v({__name:"FlowRunCreate",setup(f){const t=k(),n=F("deploymentId"),s=I(),y=N("parameters",U,void 0),{deployment:a}=S(n),w=async r=>{var l,o;try{const c=await t.deployments.createDeploymentFlowRun(n.value,r),u=((o=(l=r.state)==null?void 0:l.stateDetails)==null?void 0:o.scheduledTime)??void 0,C=!u,h=E(M,{flowRun:c,flowRunRoute:d.flowRun,router:s,immediate:C,startTime:u});i(h,"success"),s.push(d.deployment(n.value))}catch(c){i("Something went wrong trying to create a flow run","error"),console.error(c)}},_=()=>{s.back()},R=x(()=>a.value?`Create Flow Run for Deployment: ${a.value.name}`:"Create Flow Run for Deployment");return P(R),(r,l)=>{const o=D("p-layout-default");return e(a)?(O(),J(o,{key:0},{header:m(()=>[p(e(T),{deployment:e(a)},null,8,["deployment"])]),default:m(()=>[p(e(b),{deployment:e(a),parameters:e(y),onSubmit:w,onCancel:_},null,8,["deployment","parameters"])]),_:1})):B("",!0)}}});export{z as default};
