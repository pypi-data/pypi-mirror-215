import{d as F,r as g,c as u,o as n,k as U,M as y,m as w,i as l,Z as $,$ as R,a0 as j,y as z,E as A,f as G,R as O,a1 as Z,a2 as q,a as M,a3 as Y,a4 as H,a5 as J,a6 as K,g as b,h as s,w as t,a7 as Q,j as o,a8 as W,a9 as X,aa as ee,ab as ae,ac as le,ad as ne,ae as se,q as te,Y as x,af as ue}from"./index-9c193a50.js";import{u as oe}from"./usePageTitle-e0c085d0.js";const re={class:"flow-run-graphs__panel-content"},ce=F({__name:"FlowRunGraphs",props:{flowRun:{}},setup(T){const p=g(!1),f=g(null),i=g(!1),c=u(()=>({root:{"flow-run-graphs--fullscreen":p.value},graph:{"flow-run-graphs__graphs--panel-open":i.value},panel:{"flow-run-graphs__panel-container--panel-open":i.value}}));function e(d){f.value=d,i.value=!!d}function m(){i.value=!1}return(d,r)=>(n(),U("div",{class:R(["flow-run-graphs",c.value.root])},[y("div",{class:R(["flow-run-graphs__graphs",c.value.graph])},[w(l($),{class:"flow-run-graphs__timeline","flow-run":d.flowRun,height:"340px","selected-node":f.value,onSelection:e,"onUpdate:fullscreen":r[0]||(r[0]=h=>p.value=h)},null,8,["flow-run","selected-node"])],2),y("div",{class:R(["flow-run-graphs__panel-container",c.value.panel])},[y("div",re,[w(l(j),{"selected-node":f.value,floating:p.value,onDismiss:m},null,8,["selected-node","floating"])])],2)],2))}});const ie=F({__name:"FlowRun",setup(T){const p=z(),f=A("flowRunId"),i=G(),c=O(i.flowRuns.getFlowRun,[f],{interval:5e3}),e=u(()=>c.response),m=u(()=>{var a;return(a=e.value)==null?void 0:a.deploymentId}),{deployment:d}=Z(m),r=u(()=>{var a;return(a=e.value)!=null&&a.stateType?q(e.value.stateType):!0}),h=u(()=>[{label:"Logs"},{label:"Task Runs",hidden:r.value},{label:"Subflow Runs",hidden:r.value},{label:"Results",hidden:r.value},{label:"Artifacts",hidden:r.value},{label:"Details"},{label:"Parameters"}]),{tab:_,tabs:C}=M(h,"Logs");Y(f,(a,v)=>{a!==v&&(_.value="Logs")});const E=u(()=>{var a;return((a=e.value)==null?void 0:a.parameters)??{}}),I=u(()=>{var a;return((a=d.value)==null?void 0:a.parameterOpenApiSchema)??{}}),k=u(()=>H(E.value,I.value));function N(){p.push(x.flowRuns())}const P=u(()=>{var a;return(a=e.value)==null?void 0:a.stateType});J(P);const S=u(()=>e.value?`Flow Run: ${e.value.name}`:"Flow Run");return oe(S),K(()=>{c.error&&ue(c.error).isInRange("clientError")&&p.replace(x[404]())}),(a,v)=>{const B=b("p-code-highlight"),D=b("p-tabs"),V=b("p-layout-default");return n(),s(V,{class:"flow-run"},{header:t(()=>[e.value?(n(),s(l(Q),{key:0,"flow-run-id":e.value.id,onDelete:N},null,8,["flow-run-id"])):o("",!0)]),default:t(()=>[e.value&&!r.value?(n(),s(ce,{key:0,"flow-run":e.value},null,8,["flow-run"])):o("",!0),w(D,{selected:l(_),"onUpdate:selected":v[0]||(v[0]=L=>te(_)?_.value=L:null),tabs:l(C)},{details:t(()=>[e.value?(n(),s(l(W),{key:0,"flow-run":e.value},null,8,["flow-run"])):o("",!0)]),logs:t(()=>[e.value?(n(),s(l(X),{key:0,"flow-run":e.value},null,8,["flow-run"])):o("",!0)]),results:t(()=>[e.value?(n(),s(l(ee),{key:0,"flow-run":e.value},null,8,["flow-run"])):o("",!0)]),artifacts:t(()=>[e.value?(n(),s(l(ae),{key:0,"flow-run":e.value},null,8,["flow-run"])):o("",!0)]),"task-runs":t(()=>[e.value?(n(),s(l(le),{key:0,"flow-run-id":e.value.id},null,8,["flow-run-id"])):o("",!0)]),"subflow-runs":t(()=>[e.value?(n(),s(l(ne),{key:0,"flow-run-id":e.value.id},null,8,["flow-run-id"])):o("",!0)]),parameters:t(()=>[e.value?(n(),s(l(se),{key:0,"text-to-copy":k.value},{default:t(()=>[w(B,{lang:"json",text:k.value,class:"flow-run__parameters"},null,8,["text"])]),_:1},8,["text-to-copy"])):o("",!0)]),_:1},8,["selected","tabs"])]),_:1})}}});export{ie as default};
