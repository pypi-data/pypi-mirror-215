"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[5553],{7100:(o,e,a)=>{a.d(e,{Z:()=>co});var i=a(6252);const t={class:"row"},n={class:"col-md-4"},s=(0,i._)("h2",null,"Stakeholder Organisation",-1),r=(0,i._)("p",{class:"text-instructions"}," Please search for your stakeholder's organisation in the dropdown box. Once found, please select. ",-1),l={class:"text-instructions"},d=(0,i.Uk)(" If you can not find your organisation, please "),c={class:"col-md-8"},g={class:"form-group"},u=(0,i.Uk)("Stakeholder Organisation "),m={key:0,class:"error"};var p=a(5169),h=a(9860),_=a(9963);const f={class:"modal fade",id:"newOrganisationModal",tabindex:"-1","aria-labelledby":"newOrganisationModalLabel","aria-hidden":"true"},v={class:"modal-dialog modal-lg"},w={class:"modal-content"},M=(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"newOrganisationModalLabel"}," New Organisation "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"newOrganisationModalCloseButton"})],-1),y={class:"modal-body"},k={class:"row"},b=(0,i._)("div",{class:"col-md-4"},[(0,i._)("strong",null,"Description"),(0,i._)("p",{class:"text-instructions"}," Please fill out all the required fields. Please only use a generic email for the organisation email field. e.g. support@companyxyz.com ")],-1),O={class:"col-md-8"},I={class:"form-group"},S={for:"id_organisation_name"},D=(0,i.Uk)(" Organisation Name: "),E={key:0,class:"error"},Z=(0,i._)("br",null,null,-1),T={class:"row"},U={class:"form-group col-md-6"},$={for:"id_organisation_website"},N=(0,i.Uk)(" Organisation Website: "),q={key:0,class:"error"},L={key:1,class:"error"},x={class:"form-group col-md-6"},C={for:"id_organisation_email"},P=(0,i.Uk)(" Organisation Email: "),A={key:0,class:"error"},B={key:1,class:"error"},R=(0,i._)("hr",null,null,-1),W={key:0,class:"row submit-row"},G={class:"col-md-12"},F={key:1},H={key:2,class:"row"},V=(0,i._)("div",{class:"col-md-4"},[(0,i._)("strong",null,"Please Read"),(0,i._)("p",{class:"text-instructions"},' The server has found potential duplications. Please review the following Organisations. If you would like to create the organisation, please scroll to the bottom of the page and hit "Submit Organisation". If the organisation you are looking for is already created. Click on the name and you will be taken to the Organisation\'s Information page. '),(0,i._)("strong",null,"Alternatively"),(0,i._)("p",{class:"text-instructions"}," You can also change the information above and resubmit. ")],-1),Y={class:"col-md-8"},j={key:3,class:"row submit-row"},z={class:"col-md-12"};var J=a(6743),K=a(4028),Q=a(2587),X=a(4250),oo=a(3058),eo=a(8416);const ao=a(9669),io={name:"NewOrganisationModal",setup:()=>({v$:(0,K.ZP)()}),components:{ListOrganisations:J.Z},props:{},mixins:[oo.Z,eo.Z],data:()=>({duplicateOrganisations:[],organisationNameModel:"",organisationWebsiteModel:"",organisationEmailModel:""}),computed:{...(0,X.Se)({rootUrl:"getRootUrl"})},watch:{organisationNameModel(){this.duplicateOrganisations=[]},organisationWebsiteModel(){this.duplicateOrganisations=[]},organisationEmailModel(){this.duplicateOrganisations=[]}},methods:{addOrganisation(){this.v$.$touch(),this.v$.$invalid?this.showValidationErrorModal():ao.post(`${this.rootUrl}organisation_duplicates/`,this.dataToSend()).then((o=>{0==o.data.length&&this.uploadOrganisationData(),this.duplicateOrganisations=o.data})).catch((o=>{this.showErrorModal(o,"organisation","")}))},dataToSend(){const o=new FormData;return o.set("organisation_name",this.organisationNameModel),o.set("organisation_website",this.organisationWebsiteModel),o.set("organisation_email",this.organisationEmailModel),o},uploadOrganisationData(){ao.post(`${this.rootUrl}new_organisation/save/`,this.dataToSend()).then((o=>{const e=o.data[0];this.$emit("created_new_organisation",{value:e.pk,organisation_email:e.fields.organisation_email,organisation_name:e.fields.organisation_name,organisation_profile_picture:e.fields.organisation_profile_picture,organisation_website:e.fields.organisation_website})})).catch((o=>{}))}},validations:{organisationNameModel:{required:Q.C1,maxLength:(0,Q.BS)(255)},organisationWebsiteModel:{required:Q.C1,url:Q.HQ},organisationEmailModel:{required:Q.C1,email:Q.Do}}};var to=a(3744);const no=(0,to.Z)(io,[["render",function(o,e,a,t,n,s){const r=(0,i.up)("list-organisations");return(0,i.wg)(),(0,i.iD)("div",f,[(0,i._)("div",v,[(0,i._)("div",w,[M,(0,i._)("div",y,[(0,i.kq)(" FIELDS SECTION "),(0,i._)("div",k,[b,(0,i._)("div",O,[(0,i.kq)(" ORGANISATION NAME "),(0,i._)("div",I,[(0,i._)("label",S,[D,!t.v$.organisationNameModel.required&&t.v$.organisationNameModel.$dirty?((0,i.wg)(),(0,i.iD)("span",E," Please suppy a title. ")):(0,i.kq)("v-if",!0)]),(0,i.wy)((0,i._)("input",{id:"id_organisation_name",name:"organisation_name",type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=o=>n.organisationNameModel=o)},null,512),[[_.vModelText,n.organisationNameModel]])]),Z,(0,i._)("div",T,[(0,i.kq)(" ORGANISATION WEBSITE "),(0,i._)("div",U,[(0,i._)("label",$,[N,!t.v$.organisationWebsiteModel.required&&t.v$.organisationWebsiteModel.$dirty?((0,i.wg)(),(0,i.iD)("span",q," Please supply ")):(0,i.kq)("v-if",!0),!t.v$.organisationWebsiteModel.url&&t.v$.organisationWebsiteModel.$dirty?((0,i.wg)(),(0,i.iD)("span",L," Please format at URL ")):(0,i.kq)("v-if",!0)]),(0,i.wy)((0,i._)("input",{id:"id_organisation_website",name:"organisation_website",type:"url",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=o=>n.organisationWebsiteModel=o)},null,512),[[_.vModelText,n.organisationWebsiteModel]])]),(0,i.kq)(" ORGANISATION EMAIL "),(0,i._)("div",x,[(0,i._)("label",C,[P,!t.v$.organisationEmailModel.required&&t.v$.organisationEmailModel.$dirty?((0,i.wg)(),(0,i.iD)("span",A," Please supply ")):(0,i.kq)("v-if",!0),!t.v$.organisationEmailModel.email&&t.v$.organisationEmailModel.$dirty?((0,i.wg)(),(0,i.iD)("span",B," Please format as Email ")):(0,i.kq)("v-if",!0)]),(0,i.wy)((0,i._)("input",{id:"id_organisation_email",name:"organisation_email",type:"email",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=o=>n.organisationEmailModel=o)},null,512),[[_.vModelText,n.organisationEmailModel]])])])])]),R,(0,i.kq)(" SUBMIT ORGANISATION BUTTON "),0==n.duplicateOrganisations.length?((0,i.wg)(),(0,i.iD)("div",W,[(0,i._)("div",G,[(0,i._)("button",{class:"btn btn-primary save-changes",onClick:e[3]||(e[3]=(...o)=>s.addOrganisation&&s.addOrganisation(...o))}," Add Organisation ")])])):(0,i.kq)("v-if",!0),n.duplicateOrganisations.length>0?((0,i.wg)(),(0,i.iD)("h2",F," Potential Duplication ")):(0,i.kq)("v-if",!0),n.duplicateOrganisations.length>0?((0,i.wg)(),(0,i.iD)("div",H,[(0,i.kq)(" PLEASE READ "),V,(0,i.kq)(" DUPLICATE ORGANISATION LIST "),(0,i._)("div",Y,[(0,i.Wm)(r,{"organisation-results":n.duplicateOrganisations,"root-url":o.rootUrl},null,8,["organisation-results","root-url"])])])):(0,i.kq)("v-if",!0),(0,i.kq)(" STILL SUBMIT ORGANISATION "),n.duplicateOrganisations.length>0?((0,i.wg)(),(0,i.iD)("div",j,[(0,i._)("div",z,[(0,i._)("button",{class:"btn btn-primary save-changes",onClick:e[4]||(e[4]=(...o)=>s.uploadOrganisationData&&s.uploadOrganisationData(...o))}," Submit Organisation ")])])):(0,i.kq)("v-if",!0)])])])])}]]);var so=a(9113);const ro=a(9669),lo={name:"GetStakeholders",setup:()=>({v$:(0,K.ZP)()}),components:{NewOrganisationModal:no,NSelect:h.Z},mixins:[so.Z],props:{isDirty:{type:Boolean,default:!1}},data:()=>({searchTimeout:"",stakeholderFixList:[],stakeholderModel:""}),validations:{stakeholderModel:{required:Q.C1}},computed:{...(0,X.Se)({rootUrl:"getRootUrl"})},methods:{createdNewOrganisation(o){this.stakeholderModel=o,document.getElementById("newOrganisationModalCloseButton").click()},fetchOptions(o,e){this.searchTrigger({return_function:this.getOrganisationData,searchTimeout:this.searchTimeout,search:o,loading:e})},getOrganisationData(o,e){const a=new FormData;a.set("search",o),ro.post(`${this.rootUrl}search/organisation/data/`,a).then((o=>{var e=o.data;this.stakeholderFixList=e.map((o=>({value:o.pk,label:o.fields.organisation_name})))})).catch((function(o){document.getElementById("errorModalContent").innerHTML=`<strong>Search Organisation Issue:</strong><br/>${o}`,new bootstrap.Modal(document.getElementById("errorModal"),{keyboard:!1}).show(),document.getElementById("loader").style.display="none"}))},openNewOrganisationModal(){new p.u_(document.getElementById("newOrganisationModal")).show()}},watch:{stakeholderModel(){this.$emit("update_stakeholder_model",this.stakeholderModel)}},mounted(){setTimeout((()=>{this.getOrganisationData("","")}),200)}},co=(0,to.Z)(lo,[["render",function(o,e,a,p,h,_){const f=(0,i.up)("n-select"),v=(0,i.up)("new-organisation-modal");return(0,i.wg)(),(0,i.iD)("div",t,[(0,i._)("div",n,[s,r,(0,i._)("p",l,[d,(0,i._)("a",{href:"javascript:void(0)",onClick:e[0]||(e[0]=(...o)=>_.openNewOrganisationModal&&_.openNewOrganisationModal(...o))}," click here to create it. ")])]),(0,i._)("div",c,[(0,i._)("div",g,[(0,i._)("label",null,[u,!p.v$.stakeholderModel.required&&a.isDirty?((0,i.wg)(),(0,i.iD)("span",m," Please search for a Stakeholder.")):(0,i.kq)("v-if",!0)]),(0,i.Wm)(f,{options:h.stakeholderFixList,filterable:"",placeholder:"Search Stakeholders",onSearch:_.fetchOptions,value:h.stakeholderModel,"onUpdate:value":e[1]||(e[1]=o=>h.stakeholderModel=o),label:"organisation_name",class:"get-stakeholders"},null,8,["options","onSearch","value"])])]),(0,i.kq)(" MODAL "),(0,i.Wm)(v,{onCreated_new_organisation:e[2]||(e[2]=o=>_.createdNewOrganisation(o))})])}]])},6743:(o,e,a)=>{a.d(e,{Z:()=>w});var i=a(6252),t=a(3577);const n={class:"organisation-details"},s=["src"],r={class:"organisation-name"},l=["href"],d={class:"organisation-link"},c=(0,i.Uk)(" Website: "),g=["href"],u={class:"organisation-email"},m=(0,i.Uk)(" Email: "),p=["href"];var h=a(4250),_=a(6542),f=a(5808);const v={name:"ListOrganisations",components:{Icon:_.JO},props:{organisationResults:{type:Array,default:()=>[]}},computed:{...(0,h.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[f.Z],methods:{getProfilePicture(o){const e=o.fields.organisation_profile_picture;return""===e||null===e?`${this.staticUrl}/NearBeach/images/placeholder/product_tour.svg`:`${this.rootUrl}private/${e}`}}},w=(0,a(3744).Z)(v,[["render",function(o,e,a,h,_,f){const v=(0,i.up)("Icon");return(0,i.wg)(),(0,i.iD)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.organisationResults,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id,class:"row"},[(0,i._)("div",n,[(0,i._)("img",{src:f.getProfilePicture(e),alt:"Stakeholder Logo",class:"organisation-image"},null,8,s),(0,i._)("div",r,[(0,i._)("a",{href:`${o.rootUrl}organisation_information/${e.pk}/`},(0,t.toDisplayString)(e.fields.organisation_name),9,l)]),(0,i._)("div",d,[(0,i.Wm)(v,{icon:o.icons.linkOut},null,8,["icon"]),c,(0,i._)("a",{href:e.fields.organisation_website,target:"_blank",rel:"noopener noreferrer"},(0,t.toDisplayString)(e.fields.organisation_website),9,g)]),(0,i._)("div",u,[(0,i.Wm)(v,{icon:o.icons.mailIcon},null,8,["icon"]),m,(0,i._)("a",{href:`mailto:${e.fields.organisation_email}`},(0,t.toDisplayString)(e.fields.organisation_email),9,p)])])])))),128))])}]])},3931:(o,e,a)=>{a.d(e,{Z:()=>_});var i=a(6252),t=a(3577);const n={class:"row"},s={class:"col-md-4"},r=(0,i._)("h2",null,"Group Permissions",-1),l={class:"text-instructions"},d=(0,i._)("p",{class:"text-instructions"}," If you do not add one of your own group(s), you will only get readonly access. ",-1),c={class:"col-md-8"},g=(0,i.Uk)("Group List "),u={key:0,class:"error"};var m=a(4028),p=a(2587);const h={name:"GroupPermissions",setup:()=>({v$:(0,m.ZP)()}),components:{NSelect:a(9860).Z},props:{destination:{type:String,default:""},groupResults:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!0},userGroupResults:{type:Array,default:()=>[]}},watch:{groupModel(){this.$emit("update_group_model",this.groupModel)}},data:()=>({groupFixResults:[],groupModel:[]}),validations:{groupModel:{required:p.C1}},mounted(){this.groupFixResults=this.groupResults.map((o=>({value:o.pk,label:o.fields.group_name}))),this.groupModel=this.userGroupResults.map((o=>o.group_id))}},_=(0,a(3744).Z)(h,[["render",function(o,e,a,m,p,h){const _=(0,i.up)("n-select");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("div",s,[r,(0,i._)("p",l," Add or remove groups from this "+(0,t.toDisplayString)(a.destination)+". Adding a group will allow users from that group to access this "+(0,t.toDisplayString)(a.destination)+". ",1),d]),(0,i._)("div",c,[(0,i._)("label",null,[g,!m.v$.groupModel.required&&a.isDirty?((0,i.wg)(),(0,i.iD)("span",u," Please select at least one group.")):(0,i.kq)("v-if",!0)]),(0,i.Wm)(_,{options:p.groupFixResults,label:"group",value:p.groupModel,"onUpdate:value":e[0]||(e[0]=o=>p.groupModel=o),multiple:""},null,8,["options","value"])])])}]])},3058:(o,e,a)=>{a.d(e,{Z:()=>t});var i=a(5169);const t={methods:{showErrorModal(o,e,a){new i.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new ${e}-${a}<hr>${o}`,new i.u_(document.getElementById("errorModal")).show()},showValidationErrorModal(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new i.u_(document.getElementById("errorModal")).show()}}}},5808:(o,e,a)=>{a.d(e,{Z:()=>E});var i=a(3985),t=a(5555),n=a(1826),s=a(6443),r=a(1327),l=a(8521),d=a(1056),c=a(4324),g=a(9672),u=a(9867),m=a(1239),p=a(5004),h=a(1321),_=a(1216),f=a(5550),v=a(7702),w=a(7903),M=a(2606),y=a(3843),k=a(2393),b=a(3360),O=a(9714),I=a(1323),S=a(2610),D=a(5968);const E={data:()=>({icons:{arrowUp:i.Z,bugIcon:t.Z,bxBriefcase:n.Z,cardChecklist:s.Z,clipboardIcon:r.Z,documentPdf:l.Z,documentText:d.Z,folderIcon:c.Z,groupPresentation:g.Z,imageIcon:u.Z,infoCircle:m.Z,linkIcon:p.Z,linkIcon2:h.Z,linkOut:_.Z,mailIcon:f.Z,microsoftExcel:v.Z,microsoftPowerpoint:w.Z,microsoftWord:M.Z,noteAdd:y.Z,objectStorage:k.Z,passwordIcon:b.Z,trashCan:O.Z,userIcon:I.Z,usersIcon:S.Z,xCircle:D.Z}})}},8416:(o,e,a)=>{a.d(e,{Z:()=>t});var i=a(5169);const t={methods:{closeLoadingModal(){const o=new i.u_(document.getElementById("loadingModal"));document.getElementById("loadingModalContent").innerHTML="UPDATED SUCCESSFULLY",setTimeout((()=>{o.hide()}),1e3)},showLoadingModal(o){new i.u_(document.getElementById("loadingModal")).show(),document.getElementById("loadingModalContent").innerHTML=`Updating your ${o} details`}}}},9113:(o,e,a)=>{a.d(e,{Z:()=>i});const i={methods:{searchTrigger(o){""!=o.searchTimeout&&clearTimeout(o.searchTimeout),void 0===o.search?this.searchUndefined(o):this.searchDefined(o)},searchDefined(o){o.search.length>=3&&(o.searchTimeout=setTimeout(o.return_function,500,o.search,o.loading))},searchUndefined(o){o.searchTimeout=setTimeout(o.return_function,500)}}}}}]);